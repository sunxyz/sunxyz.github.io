import{z as he,L as pe,ae as ce,af as me,a0 as be,ag as V,ah as Q,ai as P,K as ve,aj as ge,d as l,ak as N,F as y,al as ye,am as Ve,_ as _e,m as we,an as ke,ao as Ce,ap as Le,aa as Se,b as Te,r as H,o as _,c as M,w as a,V as K,ad as Fe,e as O,i as $,j as g,q as c,a8 as S,s as b,aq as U,p as w,ar as X,y as Y,n as Ie,v as i,t as T,as as $e,at as Re,k as Z,au as ze,av as Be}from"./index.e7d006d4.js";import{V as Pe,a as F,b as Me,c as I}from"./VWindowItem.612d063a.js";import{m as Oe,a as Ue,f as qe,b as Ae,V as De,c as Ne,d as He,e as q}from"./VTextField.d836dd72.js";import{V as x,a as Ke}from"./VChip.449addd3.js";const je=he({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Oe(),prependIcon:{type:pe,default:"$file"},modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(t=>t!=null&&typeof t=="object")},...Ue({clearable:!0})},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:r,emit:u,slots:n}=t;const{t:d}=me(),f=be(e,"modelValue"),R=V(()=>typeof e.showSize!="boolean"?e.showSize:void 0),z=V(()=>{var o;return((o=f.value)!=null?o:[]).reduce((h,p)=>{let{size:C=0}=p;return h+C},0)}),s=V(()=>Q(z.value,R.value)),A=V(()=>{var o;return((o=f.value)!=null?o:[]).map(h=>{const{name:p="",size:C=0}=h;return e.showSize?`${p} (${Q(C,R.value)})`:p})}),le=V(()=>{var o,h;const p=(o=(h=f.value)==null?void 0:h.length)!=null?o:0;return e.showSize?d(e.counterSizeString,p,s.value):d(e.counterString,p)}),j=P(),E=P(),k=P(!1),m=P(),ae=V(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function D(){if(m.value!==document.activeElement){var o;(o=m.value)==null||o.focus()}k.value||(k.value=!0)}function W(o){var h;(h=m.value)==null||h.click(),u("click:control",o)}function te(o){o.stopPropagation(),D(),Ve(()=>{f.value=[],m!=null&&m.value&&(m.value.value=""),u("click:clear",o)})}return ve(()=>{const o=!!(n.counter||e.counter),h=!!(o||n.details),[p,C]=ge(r),[{modelValue:kl,...se}]=qe(e),[ie]=Ae(e);return l(He,N({ref:j,modelValue:f.value,"onUpdate:modelValue":L=>f.value=L,class:"v-file-input"},p,se,{"onClick:prepend":W,messages:ae.value}),{...n,default:L=>{let{isDisabled:B,isDirty:G,isReadonly:oe,isValid:ne}=L;return l(De,N({ref:E,"prepend-icon":e.prependIcon,"onClick:control":W,"onClick:clear":te},ie,{active:G.value||k.value,dirty:G.value,focused:k.value,error:ne.value===!1}),{...n,default:ue=>{let{props:{class:de,...re}}=ue;return l(y,null,[l("input",N({ref:m,type:"file",readonly:oe.value,disabled:B.value,multiple:e.multiple,name:e.name,onClick:v=>{v.stopPropagation(),D()},onChange:v=>{var J;if(!v.target)return;const fe=v.target;f.value=[...(J=fe.files)!=null?J:[]]},onFocus:D,onBlur:()=>k.value=!1},re,C),null),f.value.length>0&&l("div",{class:de},[n.selection?n.selection({fileNames:A.value,totalBytes:z.value,totalBytesReadable:s.value}):e.chips?A.value.map(v=>l(x,{key:v,size:"small",color:e.color},{default:()=>[v]})):A.value.join(", ")])])}})},details:h?L=>{var B;return l(y,null,[(B=n.details)==null?void 0:B.call(n,L),o&&l(y,null,[l("span",null,null),l(Ne,{active:!!f.value.length,value:le.value},n.counter)])])}:void 0})}),ye({},j,E,m)}}),Ee={data:()=>({tab:null,data:[],chanTypeCheck:"",showTip:!1,tipMsg:void 0,search:void 0,submitLoading:!1,channels:[],files:void 0,dialog:!1}),async mounted(){await this.initData(),this.$route.query.chanType?this.chanTypeCheck=this.$route.query.chanType:this.$route.query.q&&(this.search=this.$route.query.q,this.searchRss(this.search))},methods:{...we(["follow","reloadFollow"]),go(e){this.$router.push(e)},async initData(){let e=new Set;this.follows.forEach(u=>e.add(u.id));let t=(await ke()).filter(u=>!e.has(u.id)),r={};for(let u of t){let n=r[u.type];n||(n=[],r[u.type]=n),n.push(u)}this.data=[];for(let u in r)this.data.push({type:u,items:r[u]})},async searchRss(e){if(e=e||this.search,this.search){this.submitLoading=!0;try{this.$router.replace("/setup?q="+e),console.log(e);let t=await Ce({search:e});this.chanTypeCheck=void 0,setTimeout(()=>{this.channels=t.map(r=>({id:r}))},300)}catch(t){this.showTip=!0,this.tipMsg=t.response.data.message}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605"},async importOpml(){if(this.files&&this.files.length){try{this.submitLoading=!0,await Le(this.files[0]),this.reloadFollow(),this.showTip=!0,this.tipMsg="\u5BFC\u5165\u6210\u529F"}catch{this.showTip=!0,this.tipMsg="\u5BFC\u5165\u5931\u8D25\u8BF7\u68C0\u67E5\u6587\u4EF6"}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u9009\u62E9opml\u6587\u4EF6"},async openRead(e){this.item=await Se(e),this.item.id=e,this.dialog=!0}},computed:{...Te(["follows"])},watch:{chanTypeCheck(e){let t=this.data.filter(r=>r.type==e);e&&this.$router.replace("/setup?chanType="+e),this.channels=t.length?t[0].items:[]}}},ee=e=>(ze("data-v-821db880"),e=e(),Be(),e),We={class:"mt-8 mx-auto",style:{"max-width":"1210px"}},Ge=i("\u627E\u5230\u6700\u4F73\u4FE1\u606F\u6E90"),Je=i("\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u67E5\u627E\u7F51\u7AD9\u6458\u8981\u3001B\u7AD9\u7528\u6237\u3001\u5FAE\u535A\u7528\u6237\u3001\u77E5\u4E4E\u7528\u6237\uFF0C\u5BFC\u5165\u8BA2\u9605\u6E90"),Qe=i("fas fa-rss"),Xe=i("fab fa-bilibili"),Ye=i("fab fa-weibo"),Ze=i("fab fa-zhihu"),xe=i("far fa-file-lines"),el=i("rss\u8BA2\u9605"),ll=i("\u53D1\u73B0\u66F4\u591A\u8BA2\u9605\u6E90 "),al=ee(()=>$("a",{href:"https://docs.rsshub.app/",class:"mx-2"},"rsshub",-1)),tl=ee(()=>$("a",{href:"https://rss-source.com/"},"rss-source",-1)),sl=i(" \u641C\u7D22 "),il=i("\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237"),ol=i("\u5C0F\u52A9\u624B\uFF1A\u70B9\u51FB\u7528\u6237\u5934\u50CF\u4F1A\u8BBF\u95EEhttp://space.bilibili.com/xxx?xvsfds \u5176\u4E2D\u7684xxx\u5C31\u662F\u7528\u6237id"),nl=i(" \u641C\u7D22 "),ul=i("\u5173\u6CE8\u5FAE\u535A"),dl=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u5173\u952E\u8BCDid\u662F\u5173\u6CE8\u5173\u952E\u8BCD"),rl=i(" \u641C\u7D22 "),fl=i("\u5173\u6CE8\u77E5\u4E4E"),hl=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u8BDD\u9898id\u662F\u5173\u6CE8\u8BDD\u9898"),pl=i(" \u641C\u7D22 "),cl=i("\u5BFC\u5165 OPML \u6587\u4EF6"),ml=i("\u5C0F\u52A9\u624B\uFF1A\u5BFC\u5165\u5DF2\u6709 OPML \u6587\u4EF6"),bl=i(" \u5BFC\u5165 "),vl=i("\u8BD5\u8BD5\u8BA2\u9605\u4E0D\u540C\u7C7B\u578B\u7684\u5185\u5BB9\u5427"),gl=i("\u641C\u7D22\u7ED3\u679C"),yl=["innerHTML"],Vl=["href"],_l=i(" \u5173\u95ED ");function wl(e,t,r,u,n,d){const f=H("b-channel-light"),R=H("router-link"),z=H("c-dialog");return _(),M(y,null,[l(K,{class:"w-row"},{default:a(()=>[l(O,{width:"100%"},{default:a(()=>[$("div",We,[l(g,null,{default:a(()=>[Ge]),_:1}),l(c,null,{default:a(()=>[Je]),_:1}),l(Pe,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.tab=s),class:"mt-3"},{default:a(()=>[l(F,{value:"rssFollow"},{default:a(()=>[l(S,{title:"rss\u5730\u5740\u8BA2\u9605"},{default:a(()=>[Qe]),_:1})]),_:1}),l(F,{value:"biLiBiLiFollow"},{default:a(()=>[l(S,{title:"\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u52A8\u6001"},{default:a(()=>[Xe]),_:1})]),_:1}),l(F,{value:"weiBoFollow"},{default:a(()=>[l(S,{title:"\u5173\u6CE8\u5FAE\u535A\u52A8\u6001"},{default:a(()=>[Ye]),_:1})]),_:1}),l(F,{value:"zhiHuFollow"},{default:a(()=>[l(S,{title:"\u5173\u6CE8\u77E5\u4E4E\u52A8\u6001"},{default:a(()=>[Ze]),_:1})]),_:1}),l(F,{value:"fileFollow"},{default:a(()=>[l(S,{title:"\u5BFC\u5165OPML\u8BA2\u9605\u6E90"},{default:a(()=>[xe]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(K,{class:"w-row mt-6"},{default:a(()=>[l(O,{"max-width":"1210",class:"mx-auto auto-size"},{default:a(()=>[l(Me,{modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=s=>e.tab=s)},{default:a(()=>[l(I,{value:"rssFollow"},{default:a(()=>[l(g,{class:"my-3"},{default:a(()=>[el]),_:1}),l(c,null,{default:a(()=>[ll,al,tl]),_:1}),l(b,null,{default:a(()=>[l(q,{flat:"","hide-details":"",label:"\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605","prepend-inner-icon":"fa-solid fa-rss","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=s=>e.search=s),onKeyup:t[2]||(t[2]=U(s=>d.searchRss(e.search),["enter"]))},null,8,["modelValue"]),l(w,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:t[3]||(t[3]=s=>d.searchRss(e.search))},{default:a(()=>[sl]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"biLiBiLiFollow"},{default:a(()=>[l(g,{class:"my-3"},{default:a(()=>[il]),_:1}),l(c,null,{default:a(()=>[ol]),_:1}),l(b,null,{default:a(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u7528\u6237id","prepend-inner-icon":"fa-brands fa-bilibili","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":t[4]||(t[4]=s=>e.search=s),onKeyup:t[5]||(t[5]=U(s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search),["enter"]))},null,8,["modelValue"]),l(w,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:t[6]||(t[6]=s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search))},{default:a(()=>[nl]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"weiBoFollow"},{default:a(()=>[l(g,{class:"my-3"},{default:a(()=>[ul]),_:1}),l(c,null,{default:a(()=>[dl]),_:1}),l(b,null,{default:a(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u5173\u952E\u8BCD","prepend-inner-icon":"fa-brands fa-weibo","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":t[7]||(t[7]=s=>e.search=s),onKeyup:t[8]||(t[8]=U(s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(w,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:t[9]||(t[9]=s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)))},{default:a(()=>[rl]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"zhiHuFollow"},{default:a(()=>[l(g,{class:"my-3"},{default:a(()=>[fl]),_:1}),l(c,null,{default:a(()=>[hl]),_:1}),l(b,null,{default:a(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u8BDD\u9898","prepend-inner-icon":"fa-brands fa-zhihu","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":t[10]||(t[10]=s=>e.search=s),onKeyup:t[11]||(t[11]=U(s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(w,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:t[12]||(t[12]=s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)))},{default:a(()=>[pl]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"fileFollow"},{default:a(()=>[l(g,{class:"my-3"},{default:a(()=>[cl]),_:1}),l(c,null,{default:a(()=>[ml]),_:1}),l(b,null,{default:a(()=>[l(je,{"prepend-icon":"far fa-file-lines",modelValue:e.files,"onUpdate:modelValue":t[13]||(t[13]=s=>e.files=s),label:"OPML \u6587\u4EF6",style:{height:"56px"}},null,8,["modelValue"]),l(w,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:d.importOpml},{default:a(()=>[bl]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(K,{class:"mt-6"},{default:a(()=>[l(O,{"max-width":"1210",class:"mx-auto auto-size"},{default:a(()=>[l(c,{class:"mt-4"},{default:a(()=>[vl]),_:1}),l(b,null,{default:a(()=>[l(Ke,{modelValue:e.chanTypeCheck,"onUpdate:modelValue":t[15]||(t[15]=s=>e.chanTypeCheck=s),column:""},{default:a(()=>[(_(!0),M(y,null,X(e.data,s=>(_(),Z(x,{key:s.type,value:s.type,filter:"",outlined:""},{default:a(()=>[i(T(s.type),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.channels.length?(_(),M(y,{key:0},[l(Y),l(c,{class:"mt-4 mb-3"},{default:a(()=>[gl]),_:1}),l(b,null,{default:a(()=>[(_(!0),M(y,null,X(e.channels,s=>(_(),Z(f,{key:s.id,id:s.id,onClick:d.openRead},null,8,["id","onClick"]))),128))]),_:1})],64)):Ie("",!0)]),_:1})]),_:1}),l(Fe,{location:"top",timeout:5e3,modelValue:e.showTip,"onUpdate:modelValue":t[16]||(t[16]=s=>e.showTip=s)},{default:a(()=>[i(T(e.tipMsg),1)]),_:1},8,["modelValue"]),l(z,{modelValue:e.dialog,"onUpdate:modelValue":t[18]||(t[18]=s=>e.dialog=s)},{default:a(()=>[l(O,{class:"read-main"},{default:a(()=>[l(b,null,{default:a(()=>[l(g,{class:"text-h5 px-0",title:e.item.title},{default:a(()=>[i(T(e.item.title),1)]),_:1},8,["title"]),l(c,{class:"px-0 mb-3"},{default:a(()=>[l(R,{to:"/channel/"+e.item.channelId},{default:a(()=>[i(T(e.item.channelName),1)]),_:1},8,["to"]),i(" "+T(e.item.pubDateTime),1)]),_:1}),$("div",{class:"read-warp mx-auto",innerHTML:e.item.description},null,8,yl)]),_:1}),l(Y),l($e,null,{default:a(()=>[$("a",{href:e.item.link,target:"_blank",class:"pl-3"},"\u67E5\u770B\u539F\u6587",8,Vl),l(Re),l(w,{text:"",onClick:t[17]||(t[17]=s=>e.dialog=!1)},{default:a(()=>[_l]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Fl=_e(Ee,[["render",wl],["__scopeId","data-v-821db880"]]);export{Fl as default};

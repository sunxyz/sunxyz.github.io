import{_ as I,u as E,s as W,k as q,aQ as J,l as R,S as z,r as S,o as d,c as r,a as e,w as l,V as K,F as p,P as V,Q as G,K as v,y as N,N as M,bt as Q,I as C,aV as A,M as L,T as H,b as u,D as P,C as w,g as a,E as c,x as o,G as h,e as y,H as m,bu as X,bv as T,d as D,bw as j,bx as U,z as F,aW as O,aX as Y}from"./index.b6d40ad0.js";import{g as Z,c as $,u as ee,V as te,a as se,b as le}from"./VTable.acec47da.js";import{V as oe}from"./VSnackbar.53b5e69c.js";import{b as ie}from"./VTextField.bd3880e4.js";const{setBar:ne}=E(),ae={data(){return{items:[{text:"\u8BA2\u9605\u8BBE\u7F6E",icon:"mdi:mdi-rss"},{text:"\u63A8\u9001\u8BBE\u7F6E",icon:"mdi:mdi-send"},{text:"\u5FEB\u6377\u952E",icon:"mdi:mdi-keyboard-settings"}],item:{},tab:"\u4F18\u5148\u7EA7",slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},setup(){const{token:n}=W(q()),{reloadFollow:i}=J(),{mobile:b}=R();return{mobile:b,token:n,reloadFollow:i}},components:{Skeleton:z},methods:{async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let n=await Z();n.follows.forEach(i=>{i.sort_copy=i.sort,i.folderName_copy=i.folderName}),this.settings=n},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollows():await this.update(),this.btnLoading=!1},async changeFollows(){try{let n=this.settings.follows.filter(i=>i.sort_copy!=i.sort||i.folderName_copy!=i.folderName);n.length&&(await $(n),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(n){console.log(n),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let n={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme,enabledNewsletterSend:this.settings.enabledNewsletterSend};await ee(n),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},show(n){this.item=n}},mounted(){ne("\u8BBE\u7F6E\u4E2D\u5FC3","mdi:mdi-cog"),this.token&&this.initData()}},f=n=>(O("data-v-ecf72a3f"),n=n(),Y(),n),de=a(" \u8BBE\u7F6E\u4E2D\u5FC3"),re={class:"flex pr-4"},ue=a("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),ce=a("\u6DFB\u52A0\u8BA2\u9605\u6E90"),me=f(()=>o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"\u540D\u79F0"),o("th",{class:"text-left"},"rss\u5730\u5740"),o("th",{class:"text-left"},"\u4F18\u5148\u7EA7"),o("th",{class:"text-left"},"\u6587\u4EF6\u5939")])],-1)),he=["href"],_e=["onUpdate:modelValue"],pe=["onUpdate:modelValue"],fe={key:1,class:"my-6 mx-auto text-center"},ge=a("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),xe=a("\u63A8\u9001\u90AE\u7BB1 "),Ve=a("\u63A8\u9001\u65F6\u95F4 "),we=a(" 7:00-12:00 "),ye=a("\u5448\u73B0\u5F62\u5F0F "),be=a("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),ke=a("\u5F00\u542F\u63A8\u9001 "),Se={key:2,class:"pa-3 text-h"},ve=a(" \u6709\u4EE5\u4E0B\u5FEB\u6377\u952E\uFF1A "),Ne=f(()=>o("p",null,"\u6587\u7AE0\u5217\u8868",-1)),Ce=f(()=>o("ul",null,[o("li",null,"left right up down \u5728\u8BA2\u9605\u6E90\u548C\u6587\u7AE0\u5217\u8868\u6587\u7AE0\u4E4B\u95F4\u8DF3\u8F6C"),o("li",null,"enter \u6253\u5F00\u9009\u4E2D")],-1)),Le=f(()=>o("p",null,"\u9605\u8BFB\u5668\u89C6\u56FE",-1)),Te=f(()=>o("ul",null,[o("li",null,"a d \u6587\u7AE0\u5207\u6362"),o("li",null,"w s \u6587\u7AE0\u6EDA\u52A8"),o("li",null,"q \u9000\u51FA e \u5185\u5D4C\u89C6\u56FE r \u9605\u8BFB\u89C6\u56FE t \u6253\u5F00\u6E90\u7F51\u7AD9")],-1)),De=[ve,Ne,Ce,Le,Te],Ue={href:"https://docs.qq.com/sheet/DSFhscEJ0cEFKWW9W?tab=BB08J2"},Fe=a(" \u70B9\u51FB\u53CD\u9988 ");function Be(n,i,b,g,t,x){const B=S("router-link"),k=S("skeleton");return d(),r(p,null,[e(K,{dense:""},{default:l(()=>[V(e(v,{xl:3,lg:4,md:6,sm:12},{default:l(()=>[e(N,{class:"text"},{default:l(()=>[e(M,null,{default:l(()=>[e(Q,null,{default:l(()=>[de]),_:1}),(d(!0),r(p,null,C(t.items,(s,_)=>(d(),u(L,{key:_,value:s.text,onClick:Ie=>x.show(s)},{prepend:l(()=>[e(w,{icon:s.icon},null,8,["icon"])]),default:l(()=>[e(j,{textContent:c(s.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),e(A),e(L,{"prepend-icon":"far fa-circle-question",title:"\u95EE\u9898\u53CD\u9988",target:"_blank",href:"https://docs.qq.com/sheet/DSFhscEJ0cEFKWW9W?tab=BB08J2"})]),_:1})]),_:1})]),_:1},512),[[G,!(g.mobile&&t.item.text)]]),e(H,{name:"list"},{default:l(()=>[t.item.text?(d(),u(v,{key:0,xl:9,lg:8,md:6,sm:12},{default:l(()=>[e(N,{class:"py-3"},{default:l(()=>[e(P,{class:"mb-3"},{default:l(()=>[e(w,{icon:t.item.icon,class:"mr-3"},null,8,["icon"]),a(" "+c(t.item.text),1)]),_:1}),t.item.text=="\u8BA2\u9605\u8BBE\u7F6E"?(d(),r(p,{key:0},[o("div",re,[e(h,null,{default:l(()=>[ue]),_:1}),e(y,{color:"primary",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:l(()=>[ce]),_:1})]),e(m,null,{default:l(()=>[t.settings.follows.length?(d(),u(te,{key:0,"fixed-header":"",height:"calc(100vh - 280px)"},{default:l(()=>[me,o("tbody",null,[(d(!0),r(p,null,C(t.settings.follows,s=>(d(),r("tr",{key:s.name},[o("td",null,c(s.channelName),1),o("td",null,[o("a",{target:"_blank",href:s.rssUrl,title:"\u67E5\u770Brss"},c(s.rssUrl),9,he)]),o("td",null,[V(o("input",{type:"text","onUpdate:modelValue":_=>s.sort=_,class:F(["item-sort",{"item-change":s.sort!=s.sort_copy}])},null,10,_e),[[U,s.sort]])]),o("td",null,[V(o("input",{type:"text","onUpdate:modelValue":_=>s.folderName=_,class:F(["item-sort",{"item-change":s.folderName!=s.folderName_copy}])},null,10,pe),[[U,s.folderName]])])]))),128))])]),_:1})):(d(),r("div",fe,[e(B,{to:"/setup"},{default:l(()=>[ge]),_:1})]))]),_:1}),t.loading?(d(),u(k,{key:1,class:"ma-3",width:"64px",height:"36px"})):(d(),u(y,{key:0,loading:t.btnLoading,class:"ma-3",color:"primary",onClick:x.save,disabled:g.token?t.tab=="\u4F18\u5148\u7EA7"&&t.settings.follows.filter(s=>s.sort_copy!=s.sort||s.folderName_copy!=s.folderName).length==0:!0},{default:l(()=>[a(c(g.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))],64)):t.item.text=="\u63A8\u9001\u8BBE\u7F6E"?(d(),r(p,{key:1},[e(h,null,{default:l(()=>[xe]),_:1}),e(m,{class:"px-6"},{default:l(()=>[a(c(t.settings.email),1)]),_:1}),e(h,null,{default:l(()=>[Ve]),_:1}),e(m,{class:"px-6"},{default:l(()=>[we]),_:1}),e(h,null,{default:l(()=>[ye]),_:1}),e(m,null,{default:l(()=>[e(X,{modelValue:t.settings.itemsTheme,"onUpdate:modelValue":i[0]||(i[0]=s=>t.settings.itemsTheme=s)},{default:l(()=>[e(T,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),e(T,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:l(()=>[be]),_:1}),e(m,null,{default:l(()=>[e(se,{modelValue:t.settings.itemsLimit,"onUpdate:modelValue":i[2]||(i[2]=s=>t.settings.itemsLimit=s),class:"align-center",max:t.slider.max,min:t.slider.min,step:1,"hide-details":""},{append:l(()=>[e(ie,{modelValue:t.settings.itemsLimit,"onUpdate:modelValue":i[1]||(i[1]=s=>t.settings.itemsLimit=s),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),e(h,null,{default:l(()=>[ke]),_:1}),e(m,{class:"px-6"},{default:l(()=>[e(le,{modelValue:t.settings.enabledNewsletterSend,"onUpdate:modelValue":i[3]||(i[3]=s=>t.settings.enabledNewsletterSend=s),"hide-details":"",inset:"",label:`${t.settings.enabledNewsletterSend?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`},null,8,["modelValue","label"])]),_:1}),t.loading?(d(),u(k,{key:1,class:"ma-3",width:"64px",height:"36px"})):(d(),u(y,{key:0,loading:t.btnLoading,class:"ma-3",color:"primary",onClick:x.save},{default:l(()=>[a(c(g.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick"]))],64)):t.item.text=="\u5FEB\u6377\u952E"?(d(),r("div",Se,De)):t.item.text=="\u610F\u89C1\u53CD\u9988"?(d(),u(m,{key:3},{default:l(()=>[o("a",Ue,[Fe,e(w,{icon:"mdi:mdi-open-in-new"})])]),_:1})):D("",!0)]),_:1})]),_:1})):D("",!0)]),_:1})]),_:1}),e(oe,{location:"top",timeout:5e3,modelValue:t.tip.show,"onUpdate:modelValue":i[4]||(i[4]=s=>t.tip.show=s)},{default:l(()=>[a(c(t.tip.msg),1)]),_:1},8,["modelValue"])],64)}const Re=I(ae,[["render",Be],["__scopeId","data-v-ecf72a3f"]]);export{Re as default};

import{_ as U,u as N,s as I,l as E,aQ as q,m as W,S as J,r as k,o as d,c as r,b as e,w as s,V as R,F as _,Q as S,R as A,L as v,A as C,O as z,br as G,J as L,aV as K,N as T,U as Q,d as u,G as H,E as b,h as a,t as c,z as o,H as h,g as V,I as m,bs as M,bt as D,e as B,bu as O,bv as j,B as P,bD as X,bE as Y}from"./index.d851babc.js";import{g as Z,c as $,u as ee,V as te,a as se,b as le}from"./VTable.3582a21d.js";import{V as oe}from"./VSnackbar.bf87abd4.js";import{b as ie}from"./VTextField.cbe81e38.js";const{setBar:ne}=N(),ae={data(){return{items:[{text:"\u8BA2\u9605\u8BBE\u7F6E",icon:"mdi:mdi-rss"},{text:"\u63A8\u9001\u8BBE\u7F6E",icon:"mdi:mdi-send"},{text:"\u5FEB\u6377\u952E",icon:"mdi:mdi-keyboard-settings"}],item:{},tab:"\u4F18\u5148\u7EA7",slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},setup(){const{token:i}=I(E()),{reloadFollow:n}=q(),{mobile:w}=W();return{mobile:w,token:i,reloadFollow:n}},components:{Skeleton:J},methods:{async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let i=await Z();i.follows.forEach(n=>n.sort_copy=n.sort),this.settings=i},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollowsSort():await this.update(),this.btnLoading=!1},async changeFollowsSort(){try{let i=this.settings.follows.filter(n=>n.sort_copy!=n.sort);i.length&&(await $(i),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(i){console.log(i),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let i={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme,enabledNewsletterSend:this.settings.enabledNewsletterSend};await ee(i),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},show(i){this.item=i}},mounted(){ne("\u8BBE\u7F6E\u4E2D\u5FC3","mdi:mdi-cog"),this.token&&this.initData()}},p=i=>(X("data-v-c507c9e4"),i=i(),Y(),i),de=a(" \u8BBE\u7F6E\u4E2D\u5FC3"),re={class:"flex pr-4"},ue=a("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),ce=a("\u6DFB\u52A0\u8BA2\u9605\u6E90"),me=p(()=>o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"\u540D\u79F0"),o("th",{class:"text-left"},"rss\u5730\u5740"),o("th",{class:"text-left"},"\u4F18\u5148\u7EA7")])],-1)),he=["href"],_e=["onUpdate:modelValue"],pe={key:1,class:"my-6 mx-auto text-center"},fe=a("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),ge=a("\u63A8\u9001\u90AE\u7BB1 "),xe=a("\u63A8\u9001\u65F6\u95F4 "),be=a(" 7:00-12:00 "),Ve=a("\u5448\u73B0\u5F62\u5F0F "),we=a("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),ye=a("\u5F00\u542F\u63A8\u9001 "),ke={key:2,class:"pa-3 text-h"},Se=a(" \u6709\u4EE5\u4E0B\u5FEB\u6377\u952E\uFF1A "),ve=p(()=>o("p",null,"\u6587\u7AE0\u5217\u8868",-1)),Ce=p(()=>o("ul",null,[o("li",null,"left right up down \u5728\u8BA2\u9605\u6E90\u548C\u6587\u7AE0\u5217\u8868\u6587\u7AE0\u4E4B\u95F4\u8DF3\u8F6C"),o("li",null,"enter \u6253\u5F00\u9009\u4E2D")],-1)),Le=p(()=>o("p",null,"\u9605\u8BFB\u5668\u89C6\u56FE",-1)),Te=p(()=>o("ul",null,[o("li",null,"a d \u6587\u7AE0\u5207\u6362"),o("li",null,"w s \u6587\u7AE0\u6EDA\u52A8"),o("li",null,"q \u9000\u51FA e \u5185\u5D4C\u89C6\u56FE r \u9605\u8BFB\u89C6\u56FE t \u6253\u5F00\u6E90\u7F51\u7AD9")],-1)),De=[Se,ve,Ce,Le,Te],Be={href:"https://docs.qq.com/sheet/DSFhscEJ0cEFKWW9W?tab=BB08J2"},Fe=a(" \u70B9\u51FB\u53CD\u9988 ");function Ue(i,n,w,f,t,g){const F=k("router-link"),y=k("skeleton");return d(),r(_,null,[e(R,{dense:""},{default:s(()=>[S(e(v,{xl:3,lg:4,md:6,sm:12},{default:s(()=>[e(C,{class:"text"},{default:s(()=>[e(z,null,{default:s(()=>[e(G,null,{default:s(()=>[de]),_:1}),(d(!0),r(_,null,L(t.items,(l,x)=>(d(),u(T,{key:x,value:l.text,onClick:Ne=>g.show(l)},{prepend:s(()=>[e(b,{icon:l.icon},null,8,["icon"])]),default:s(()=>[e(O,{textContent:c(l.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),e(K),e(T,{"prepend-icon":"far fa-circle-question",title:"\u95EE\u9898\u53CD\u9988",target:"_blank",href:"https://docs.qq.com/sheet/DSFhscEJ0cEFKWW9W?tab=BB08J2"})]),_:1})]),_:1})]),_:1},512),[[A,!(f.mobile&&t.item.text)]]),e(Q,{name:"list"},{default:s(()=>[t.item.text?(d(),u(v,{key:0,xl:9,lg:8,md:6,sm:12},{default:s(()=>[e(C,{class:"py-3"},{default:s(()=>[e(H,{class:"mb-3"},{default:s(()=>[e(b,{icon:t.item.icon,class:"mr-3"},null,8,["icon"]),a(" "+c(t.item.text),1)]),_:1}),t.item.text=="\u8BA2\u9605\u8BBE\u7F6E"?(d(),r(_,{key:0},[o("div",re,[e(h,null,{default:s(()=>[ue]),_:1}),e(V,{color:"primary",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:s(()=>[ce]),_:1})]),e(m,null,{default:s(()=>[t.settings.follows.length?(d(),u(te,{key:0,"fixed-header":"",height:"calc(100vh - 280px)"},{default:s(()=>[me,o("tbody",null,[(d(!0),r(_,null,L(t.settings.follows,l=>(d(),r("tr",{key:l.name},[o("td",null,c(l.channelName),1),o("td",null,[o("a",{target:"_blank",href:l.rssUrl,title:"\u67E5\u770Brss"},c(l.rssUrl),9,he)]),o("td",null,[S(o("input",{type:"text","onUpdate:modelValue":x=>l.sort=x,class:P(["item-sort",{"item-change":l.sort!=l.sort_copy}])},null,10,_e),[[j,l.sort]])])]))),128))])]),_:1})):(d(),r("div",pe,[e(F,{to:"/setup"},{default:s(()=>[fe]),_:1})]))]),_:1}),t.loading?(d(),u(y,{key:1,class:"ma-3",width:"64px",height:"36px"})):(d(),u(V,{key:0,loading:t.btnLoading,class:"ma-3",color:"primary",onClick:g.save,disabled:f.token?t.tab=="\u4F18\u5148\u7EA7"&&t.settings.follows.filter(l=>l.sort_copy!=l.sort).length==0:!0},{default:s(()=>[a(c(f.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))],64)):t.item.text=="\u63A8\u9001\u8BBE\u7F6E"?(d(),r(_,{key:1},[e(h,null,{default:s(()=>[ge]),_:1}),e(m,{class:"px-6"},{default:s(()=>[a(c(t.settings.email),1)]),_:1}),e(h,null,{default:s(()=>[xe]),_:1}),e(m,{class:"px-6"},{default:s(()=>[be]),_:1}),e(h,null,{default:s(()=>[Ve]),_:1}),e(m,null,{default:s(()=>[e(M,{modelValue:t.settings.itemsTheme,"onUpdate:modelValue":n[0]||(n[0]=l=>t.settings.itemsTheme=l)},{default:s(()=>[e(D,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),e(D,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:s(()=>[we]),_:1}),e(m,null,{default:s(()=>[e(se,{modelValue:t.settings.itemsLimit,"onUpdate:modelValue":n[2]||(n[2]=l=>t.settings.itemsLimit=l),class:"align-center",max:t.slider.max,min:t.slider.min,step:1,"hide-details":""},{append:s(()=>[e(ie,{modelValue:t.settings.itemsLimit,"onUpdate:modelValue":n[1]||(n[1]=l=>t.settings.itemsLimit=l),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),e(h,null,{default:s(()=>[ye]),_:1}),e(m,{class:"px-6"},{default:s(()=>[e(le,{modelValue:t.settings.enabledNewsletterSend,"onUpdate:modelValue":n[3]||(n[3]=l=>t.settings.enabledNewsletterSend=l),"hide-details":"",inset:"",label:`${t.settings.enabledNewsletterSend?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`},null,8,["modelValue","label"])]),_:1}),t.loading?(d(),u(y,{key:1,class:"ma-3",width:"64px",height:"36px"})):(d(),u(V,{key:0,loading:t.btnLoading,class:"ma-3",color:"primary",onClick:g.save},{default:s(()=>[a(c(f.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick"]))],64)):t.item.text=="\u5FEB\u6377\u952E"?(d(),r("div",ke,De)):t.item.text=="\u610F\u89C1\u53CD\u9988"?(d(),u(m,{key:3},{default:s(()=>[o("a",Be,[Fe,e(b,{icon:"mdi:mdi-open-in-new"})])]),_:1})):B("",!0)]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1}),e(oe,{location:"top",timeout:5e3,modelValue:t.tip.show,"onUpdate:modelValue":n[4]||(n[4]=l=>t.tip.show=l)},{default:s(()=>[a(c(t.tip.msg),1)]),_:1},8,["modelValue"])],64)}const Je=U(ae,[["render",Ue],["__scopeId","data-v-c507c9e4"]]);export{Je as default};

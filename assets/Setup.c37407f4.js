import{a0 as ce,an as be,ao as ve,b as ee,a8 as ye,v as w,ap as Z,x as A,A as ge,af as Ve,aq as we,ar as ke,d as l,P as N,F as g,as as Ce,ag as Te,at as $,au as Se,_ as Fe,u as Re,av as Be,aw as Le,ax as Ie,ay as ze,$ as Me,r as K,o as k,c as O,w as t,V as E,D as j,C as Pe,J as C,j as o,t as r,K as c,I as R,L as y,az as U,h as B,N as _,aA as Ae,g as Oe,e as x}from"./index.98049273.js";import{R as Ue}from"./Reader.e3ce1ebe.js";import{V as qe}from"./VSnackbar.8650d7e2.js";import{V as De,a as L,b as He,c as I}from"./VWindowItem.55077ad5.js";import{m as Ne,f as Ke,V as Ee,a as je,b as q}from"./VTextField.475dbc82.js";import{V as le,a as We}from"./VChip.80a60679.js";const Ge=ce()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...be({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ve(e).every(a=>a!=null&&typeof a=="object")},...Ne({clearable:!0})},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:u,emit:n,slots:p}=a;const{t:d}=ee(),f=ye(e,"modelValue"),z=w(()=>typeof e.showSize!="boolean"?e.showSize:void 0),M=w(()=>{var i;return((i=f.value)!=null?i:[]).reduce((m,h)=>{let{size:T=0}=h;return m+T},0)}),s=w(()=>Z(M.value,z.value)),D=w(()=>{var i;return((i=f.value)!=null?i:[]).map(m=>{const{name:h="",size:T=0}=m;return e.showSize?`${h} (${Z(T,z.value)})`:h})}),ae=w(()=>{var m,h;const i=(h=(m=f.value)==null?void 0:m.length)!=null?h:0;return e.showSize?d(e.counterSizeString,i,s.value):d(e.counterString,i)}),W=A(),G=A(),V=A(!1),b=A(),te=w(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function H(){var i;b.value!==document.activeElement&&((i=b.value)==null||i.focus()),V.value||(V.value=!0)}function se(i){$(e["onClick:prepend"],i),J(i)}function ie(i){n("mousedown:control",i)}function J(i){var m;(m=b.value)==null||m.click(),n("click:control",i)}function ne(i){i.stopPropagation(),H(),Se(()=>{f.value=[],$(e["onClick:clear"],i)})}return ge(f,i=>{(!Array.isArray(i)||!i.length)&&b.value&&(b.value.value="")}),Ve(()=>{const i=!!(p.counter||e.counter),m=!!(i||p.details),[h,T]=we(u),[{modelValue:$e,...oe}]=ke(e),[ue]=Ke(e);return l(Ce,N({ref:W,modelValue:f.value,"onUpdate:modelValue":S=>f.value=S,class:"v-file-input","onClick:prepend":se,"onClick:append":e["onClick:append"]},h,oe,{focused:V.value,messages:te.value}),{...p,default:S=>{let{id:P,isDisabled:F,isDirty:Q,isReadonly:re,isValid:de}=S;return l(Ee,N({ref:G,"prepend-icon":e.prependIcon,onMousedown:ie,onClick:J,"onClick:clear":ne,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ue,{id:P.value,active:Q.value||V.value,dirty:Q.value,disabled:F.value,focused:V.value,error:de.value===!1}),{...p,default:fe=>{var X;let{props:{class:me,...pe}}=fe;return l(g,null,[l("input",N({ref:b,type:"file",readonly:re.value,disabled:F.value,multiple:e.multiple,name:e.name,onClick:v=>{v.stopPropagation(),H()},onChange:v=>{var Y;if(!v.target)return;const he=v.target;f.value=[...(Y=he.files)!=null?Y:[]]},onFocus:H,onBlur:()=>V.value=!1},pe,T),null),l("div",{class:me},[!!((X=f.value)!=null&&X.length)&&(p.selection?p.selection({fileNames:D.value,totalBytes:M.value,totalBytesReadable:s.value}):e.chips?D.value.map(v=>l(le,{key:v,size:"small",color:e.color},{default:()=>[v]})):D.value.join(", "))])])}})},details:m?S=>{var P,F;return l(g,null,[(P=p.details)==null?void 0:P.call(p,S),i&&l(g,null,[l("span",null,null),l(je,{active:!!((F=f.value)!=null&&F.length),value:ae.value},p.counter)])])}:void 0})}),Te({},W,G,b)}}),{setBar:Je}=Re(),{reloadFollow:Qe}=Be(),Xe={data:()=>({tab:null,data:[],chanTypeCheck:"",showTip:!1,tipMsg:void 0,search:void 0,submitLoading:!1,channels:[],files:void 0,dialog:!1,item:{}}),setup(){const{t:e}=ee();function a(u){return e("setup."+u)}return{st:a}},components:{Reader:Ue},async mounted(){Je(this.st("appbar"),"mdi:mdi-shape-circle-plus"),await this.initData(),this.$route.query.chanType?this.chanTypeCheck=this.$route.query.chanType:this.$route.query.q&&(this.search=this.$route.query.q,this.searchRss(this.search))},methods:{go(e){this.$router.push(e)},async initData(){let e=await Le(),a={};for(let u of e){let n=a[u.type];n||(n=[],a[u.type]=n),n.push(u)}this.data=[];for(let u in a)this.data.push({type:u,items:a[u]})},async searchRss(e){if(e=e||this.search,this.search){this.submitLoading=!0;try{this.$router.replace("/setup?q="+e),console.log(e);let a=await Ie({search:e});this.chanTypeCheck=void 0,setTimeout(()=>{this.channels=a.map(u=>({id:u}))},300)}catch(a){this.showTip=!0,this.tipMsg=a.response.data.message}this.submitLoading=!1}else this.showTip=!0,this.tipMsg=this.st("rssSearchErr")},async importOpml(){if(this.files&&this.files.length){try{this.submitLoading=!0,await ze(this.files[0]),Qe(),this.showTip=!0,this.tipMsg=this.st("importOpmlSuccess")}catch{this.showTip=!0,this.tipMsg=this.st("importOpmlErr")}this.submitLoading=!1}else this.showTip=!0,this.tipMsg=this.st("importOpmlFail")},async openRead(e){this.item=await Me(e),this.item.id=e}},watch:{chanTypeCheck(e){let a=this.data.filter(u=>u.type==e);e&&this.$router.replace("/setup?chanType="+e),this.channels=a.length?a[0].items:[]}}},Ye={class:"mt-8 mx-auto",style:{"max-width":"1210px"}};function Ze(e,a,u,n,p,d){const f=K("b-channel-light"),z=K("reader"),M=K("c-dialog");return k(),O(g,null,[l(E,{class:"w-row"},{default:t(()=>[l(j,{width:"100%"},{default:t(()=>[Pe("div",Ye,[l(C,null,{default:t(()=>[o(r(n.st("title")),1)]),_:1}),l(c,null,{default:t(()=>[o(r(n.st("subTitle")),1)]),_:1}),l(De,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.tab=s),class:"mt-3"},{default:t(()=>[l(L,{value:"rssFollow"},{default:t(()=>[l(R,{title:n.st("rssTitle")},{default:t(()=>[o(" fas fa-rss")]),_:1},8,["title"])]),_:1}),l(L,{value:"fileFollow"},{default:t(()=>[l(R,{title:n.st("opmlTitle")},{default:t(()=>[o("far fa-file-lines")]),_:1},8,["title"])]),_:1}),l(L,{value:"biLiBiLiFollow"},{default:t(()=>[l(R,{title:"\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u52A8\u6001"},{default:t(()=>[o("fab fa-bilibili")]),_:1})]),_:1}),l(L,{value:"weiBoFollow"},{default:t(()=>[l(R,{title:"\u5173\u6CE8\u5FAE\u535A\u52A8\u6001"},{default:t(()=>[o("fab fa-weibo")]),_:1})]),_:1}),l(L,{value:"zhiHuFollow"},{default:t(()=>[l(R,{title:"\u5173\u6CE8\u77E5\u4E4E\u52A8\u6001"},{default:t(()=>[o("fab fa-zhihu")]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(E,{class:"w-row mt-6"},{default:t(()=>[l(j,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[l(He,{modelValue:e.tab,"onUpdate:modelValue":a[14]||(a[14]=s=>e.tab=s)},{default:t(()=>[l(I,{value:"rssFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[o(r(n.st("rssTitle")),1)]),_:1}),l(c,{innerHTML:n.st("rssSubHtml")},null,8,["innerHTML"]),l(y,null,{default:t(()=>[l(q,{flat:"","hide-details":"",label:n.st("rssInputLabel"),"prepend-inner-icon":"fa-solid fa-rss","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=s=>e.search=s),onKeyup:a[2]||(a[2]=U(s=>d.searchRss(e.search),["enter"]))},null,8,["label","modelValue"]),l(B,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[3]||(a[3]=s=>d.searchRss(e.search))},{default:t(()=>[o(r(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"biLiBiLiFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[o("\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237")]),_:1}),l(c,null,{default:t(()=>[o("\u5C0F\u52A9\u624B\uFF1A\u70B9\u51FB\u7528\u6237\u5934\u50CF\u4F1A\u8BBF\u95EEhttp://space.bilibili.com/xxx?xvsfds \u5176\u4E2D\u7684xxx\u5C31\u662F\u7528\u6237id")]),_:1}),l(y,null,{default:t(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u7528\u6237id","prepend-inner-icon":"fa-brands fa-bilibili","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[4]||(a[4]=s=>e.search=s),onKeyup:a[5]||(a[5]=U(s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search),["enter"]))},null,8,["modelValue"]),l(B,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[6]||(a[6]=s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search))},{default:t(()=>[o(r(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"weiBoFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[o("\u5173\u6CE8\u5FAE\u535A")]),_:1}),l(c,null,{default:t(()=>[o("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u5173\u952E\u8BCDid\u662F\u5173\u6CE8\u5173\u952E\u8BCD")]),_:1}),l(y,null,{default:t(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u5173\u952E\u8BCD","prepend-inner-icon":"fa-brands fa-weibo","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[7]||(a[7]=s=>e.search=s),onKeyup:a[8]||(a[8]=U(s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(B,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[9]||(a[9]=s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)))},{default:t(()=>[o(r(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"zhiHuFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[o("\u5173\u6CE8\u77E5\u4E4E")]),_:1}),l(c,null,{default:t(()=>[o("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u8BDD\u9898id\u662F\u5173\u6CE8\u8BDD\u9898")]),_:1}),l(y,null,{default:t(()=>[l(q,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u8BDD\u9898","prepend-inner-icon":"fa-brands fa-zhihu","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[10]||(a[10]=s=>e.search=s),onKeyup:a[11]||(a[11]=U(s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(B,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[12]||(a[12]=s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)))},{default:t(()=>[o(r(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(I,{value:"fileFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[o(r(n.st("opmlTitle")),1)]),_:1}),l(c,null,{default:t(()=>[o(r(n.st("opmlSubHtml")),1)]),_:1}),l(y,null,{default:t(()=>[l(Ge,{"prepend-icon":"far fa-file-lines",modelValue:e.files,"onUpdate:modelValue":a[13]||(a[13]=s=>e.files=s),label:n.st("opmlTitle"),style:{height:"56px"}},null,8,["modelValue","label"]),l(B,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:d.importOpml},{default:t(()=>[o(r(n.st("importBtn")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(E,{class:"mt-6"},{default:t(()=>[l(j,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[l(c,{class:"mt-4"},{default:t(()=>[o(r(n.st("recommend")),1)]),_:1}),l(y,null,{default:t(()=>[l(We,{modelValue:e.chanTypeCheck,"onUpdate:modelValue":a[15]||(a[15]=s=>e.chanTypeCheck=s),column:""},{default:t(()=>[(k(!0),O(g,null,_(e.data,s=>(k(),x(le,{key:s.type,value:s.type,filter:"",outlined:""},{default:t(()=>[o(r(s.type),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.channels.length?(k(),O(g,{key:0},[l(Ae),l(c,{class:"mt-4 mb-3"},{default:t(()=>[o(r(n.st("searchResult")),1)]),_:1}),l(y,null,{default:t(()=>[(k(!0),O(g,null,_(e.channels,s=>(k(),x(f,{key:s.id,id:s.id,onClick:d.openRead},null,8,["id","onClick"]))),128))]),_:1})],64)):Oe("",!0)]),_:1})]),_:1}),l(qe,{location:"top",timeout:5e3,modelValue:e.showTip,"onUpdate:modelValue":a[16]||(a[16]=s=>e.showTip=s)},{default:t(()=>[o(r(e.tipMsg),1)]),_:1},8,["modelValue"]),l(M,{"model-value":e.item.id!=null},{default:t(()=>[l(z,{modelValue:e.item,"onUpdate:modelValue":a[17]||(a[17]=s=>e.item=s),"ctrl-style":"position:fixed","hidde-up-and-down":!0},null,8,["modelValue"])]),_:1},8,["model-value"])],64)}const sl=Fe(Xe,[["render",Ze],["__scopeId","data-v-e25db16e"]]);export{sl as default};

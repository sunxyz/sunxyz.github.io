import{_ as S,b3 as T,b as U,m as C,r as g,o as d,c as u,d as t,w as e,V as w,ad as D,F as c,e as V,i as n,j as F,a8 as I,q as r,ar as f,k as m,p as y,s as h,v as i,t as _,a3 as N,b4 as R,x as B,au as z,av as E}from"./index.043d7480.js";import{g as W,c as j,u as q,V as A,a as G,b as x,d as M}from"./VTable.347ae92d.js";import{V as H,c as b,b as J,a as K}from"./VWindowItem.392b49a4.js";import{e as O}from"./VTextField.e75d9d33.js";const P={data(){return{tab:"\u4F18\u5148\u7EA7",items:["\u4F18\u5148\u7EA7","\u63A8\u9001\u8BBE\u7F6E"],slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},components:{Skeleton:T},computed:{...U(["token"])},methods:{...C(["reloadFollow"]),async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let o=await W();o.follows.forEach(a=>a.sort_copy=a.sort),this.settings=o},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollowsSort():await this.update(),this.btnLoading=!1},async changeFollowsSort(){try{let o=this.settings.follows.filter(a=>a.sort_copy!=a.sort);o.length&&(await j(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(o){console.log(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let o={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme};await q(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}}},mounted(){this.token&&this.initData()}},Q=o=>(z("data-v-467fee54"),o=o(),E(),o),X={class:"mt-6 mx-auto",style:{"max-width":"1210px"}},Y=i("far fa-paper-plane"),Z=i(" Rss2Newsletter"),$=i("\u5B9A\u5236\u5C5E\u4E8E\u4F60\u7684\u4E13\u5C5E\u4FE1\u606F \u5C11\u5373\u662F\u591A; \u7F51\u4E0A\u4FE1\u606F\u6D69\u5982\u4E91\u70DF\uFF0C\u5206\u6563\u5728\u5404\u5904\uFF0C\u5982\u4F55\u89E3\u51B3\u4FE1\u606F\u8FC7\u8F7D\uFF0C\u4E00\u4E2A\u90AE\u7BB1\u5373\u53EF\u3002 "),tt={class:"flex pr-4"},et=i("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),st=i("\u6DFB\u52A0\u8BA2\u9605\u6E90"),lt=Q(()=>n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"\u540D\u79F0"),n("th",{class:"text-left"},"rss\u5730\u5740"),n("th",{class:"text-left"},"\u4F18\u5148\u7EA7")])],-1)),at=["href"],ot=["onUpdate:modelValue"],it={key:1,class:"my-6 mx-auto text-center"},nt=i("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),dt=i("\u5448\u73B0\u5F62\u5F0F "),ut=i("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),rt=i("\u63A8\u9001\u90AE\u7BB1 "),mt=i("\u63A8\u9001\u65F6\u95F4 "),ht=i(" 7:00-12:00 ");function _t(o,a,ct,pt,l,k){const v=g("router-link"),p=g("skeleton");return d(),u(c,null,[t(w,{class:"w-row"},{default:e(()=>[t(V,{width:"100%"},{default:e(()=>[n("div",X,[t(F,null,{default:e(()=>[t(I,{size:"small",class:"mr-2"},{default:e(()=>[Y]),_:1}),Z]),_:1}),t(r,null,{default:e(()=>[$]),_:1}),t(H,{modelValue:l.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>l.tab=s),class:"mt-3",grow:""},{default:e(()=>[(d(!0),u(c,null,f(l.items,s=>(d(),m(K,{key:s,value:s},{default:e(()=>[i(_(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(w,{class:"w-row mt-8"},{default:e(()=>[t(V,{"max-width":"1210",class:"mx-auto auto-size"},{default:e(()=>[l.loading?(d(),m(h,{key:1,style:{"min-height":"60vh"}},{default:e(()=>[t(p,{class:"mt-3",width:"20%",height:"1em"}),(d(),u(c,null,f(6,s=>t(p,{class:"mt-6",width:"100%",height:"1.2em",key:s})),64))]),_:1})):(d(),m(J,{key:0,modelValue:l.tab,"onUpdate:modelValue":a[4]||(a[4]=s=>l.tab=s),style:{"min-height":"60vh"}},{default:e(()=>[t(b,{value:"\u4F18\u5148\u7EA7"},{default:e(()=>[n("div",tt,[t(r,{class:"mt-6"},{default:e(()=>[et]),_:1}),t(y,{color:"indigo",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:e(()=>[st]),_:1})]),t(h,null,{default:e(()=>[l.settings.follows.length?(d(),m(A,{key:0,"fixed-header":"",height:"50vh"},{default:e(()=>[lt,n("tbody",null,[(d(!0),u(c,null,f(l.settings.follows,s=>(d(),u("tr",{key:s.name},[n("td",null,_(s.channelName),1),n("td",null,[n("a",{target:"_blank",href:s.rssUrl,title:"\u67E5\u770Brss"},_(s.rssUrl),9,at)]),n("td",null,[N(n("input",{type:"text","onUpdate:modelValue":L=>s.sort=L,class:B(["item-sort",{"item-change":s.sort!=s.sort_copy}])},null,10,ot),[[R,s.sort]])])]))),128))])]),_:1})):(d(),u("div",it,[t(v,{to:"/setup"},{default:e(()=>[nt]),_:1})]))]),_:1})]),_:1}),t(b,{value:"\u63A8\u9001\u8BBE\u7F6E"},{default:e(()=>[t(r,{class:"mt-6"},{default:e(()=>[dt]),_:1}),t(h,null,{default:e(()=>[t(G,{modelValue:l.settings.itemsTheme,"onUpdate:modelValue":a[1]||(a[1]=s=>l.settings.itemsTheme=s)},{default:e(()=>[t(x,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),t(x,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:e(()=>[ut]),_:1}),t(h,null,{default:e(()=>[t(M,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":a[3]||(a[3]=s=>l.settings.itemsLimit=s),class:"align-center",max:l.slider.max,min:l.slider.min,step:1,"hide-details":""},{append:e(()=>[t(O,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":a[2]||(a[2]=s=>l.settings.itemsLimit=s),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),t(r,null,{default:e(()=>[rt]),_:1}),t(h,{class:"px-6"},{default:e(()=>[i(_(l.settings.email),1)]),_:1}),t(r,null,{default:e(()=>[mt]),_:1}),t(h,{class:"px-6"},{default:e(()=>[ht]),_:1})]),_:1})]),_:1},8,["modelValue"])),l.loading?(d(),m(p,{key:3,class:"ma-3",width:"64px",height:"36px"})):(d(),m(y,{key:2,loading:l.btnLoading,class:"ma-3",color:"indigo",onClick:k.save,disabled:o.token?l.tab=="\u4F18\u5148\u7EA7"&&l.settings.follows.filter(s=>s.sort_copy!=s.sort).length==0:!0},{default:e(()=>[i(_(o.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))]),_:1})]),_:1}),t(D,{location:"top",timeout:5e3,modelValue:l.tip.show,"onUpdate:modelValue":a[5]||(a[5]=s=>l.tip.show=s)},{default:e(()=>[i(_(l.tip.msg),1)]),_:1},8,["modelValue"])],64)}const yt=S(P,[["render",_t],["__scopeId","data-v-467fee54"]]);export{yt as default};

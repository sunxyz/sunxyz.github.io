import{a as T,g as C}from"./auth.5e3bdf6a.js";import{_ as b,u as B,m as F,a as S,r as c,b as I,o as m,c as L,d as a,w as t,F as N,V as U,e as D,f as E,g as G,h as M,i as R,j as v,t as g,k as w,l as j,n as q,p,q as z,s as A,v as f}from"./index.f3e9c636.js";import{V as W}from"./VLayout.97abd648.js";import{V as H}from"./VSnackbar.1fc98129.js";import{V as J}from"./VTextField.879da1c5.js";const K={setup(){B();const{setToken:x,setUser:o,initFollow:V}=F(),{follows:e}=S();console.log(e);const n=c(void 0),s=I({show:!1,text:void 0}),l=c(!1),i=c(void 0);let _="";async function y(){if(l.value=!0,n.value)try{_=await T({email:n.value}),i.value="\u8BA4\u8BC1\u4E2D...... \u8BF7\u6CE8\u610F\u67E5\u6536\u90AE\u4EF6\u8BA4\u8BC1",h(),l.value=!1}catch{s.text="\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5!",s.show=!0,l.value=!1}else s.text="\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740",s.show=!0,l.value=!1}function h(){async function u(){let r=await C({key:_});clearInterval(d),k(r),i.value="\u8BA4\u8BC1\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C\u9996\u9875"}let d=setInterval(u,5e3);setTimeout(()=>{clearInterval(d),i.value="\u8BA4\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",setTimeout(()=>{i.value=void 0},3e3)},6e4)}async function k(u){x(u),o({username:n.value}),e.value.forEach(r=>{z({id:r.id})});let d=await A();V(d)}return{email:n,tip:s,loading:l,authText:i,login:y}}},O=f("div",{style:{display:"flex","align-items":"end"}},[f("div",{class:"mr-6"},"WebFollow"),f("small",null,"\u767B\u9646")],-1),P=p("\u8BF7\u767B\u9646"),Q=p(" \u767B\u9646 ");function X(x,o,V,e,n,s){return m(),L(N,null,[a(W,null,{default:t(()=>[a(U,{color:"indigo",density:"prominent"},{default:t(()=>[a(D,{class:"mx-auto","max-width":"1024px"},{default:t(()=>[a(E,{class:"mt-6"},{default:t(()=>[O]),_:1})]),_:1})]),_:1}),a(G,null,{default:t(()=>[a(M,null,{default:t(()=>[a(R,{"max-width":"480px",class:"mx-auto",style:{"margin-top":"-36px","z-index":"10000"}},{default:t(()=>[e.authText?(m(),v(w,{key:0,textContent:g(e.authText),class:"my-12 text-align"},null,8,["textContent"])):(m(),v(w,{key:1},{default:t(()=>[a(j,{class:"mt-3"},{default:t(()=>[P]),_:1}),a(J,{"hide-details":"auto",label:"\u90AE\u7BB1\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740",type:"email",class:"my-4",modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=l=>e.email=l)},null,8,["modelValue"]),a(q,{block:"",color:"indigo",loading:e.loading,onClick:e.login},{default:t(()=>[Q]),_:1},8,["loading","onClick"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),a(H,{modelValue:e.tip.show,"onUpdate:modelValue":o[1]||(o[1]=l=>e.tip.show=l)},{default:t(()=>[p(g(e.tip.text),1)]),_:1},8,["modelValue"])],64)}const te=b(K,[["render",X]]);export{te as default};

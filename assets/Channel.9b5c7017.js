import{_ as C,ax as k,ay as x,az as y,aA as b,aB as v,aC as V,aD as B,o,c as d,d as t,w as e,aE as f,i as r,aF as z,v as i,f as h,t as n,n as c,l as p,k as w,p as m,aG as D,aH as F}from"./index.3ac046ec.js";import{V as _}from"./VChip.220f242c.js";const T={inject:["viewName"],props:["id"],data:()=>({channel:{id:void 0,name:void 0},data:[],params:{page:0,size:20},isLast:!0,loading:!0,lazyBannerBg:"https://images4.alphacoders.com/121/1217454.jpg"}),components:{IndexView:k},mounted(){x(window,document.documentElement,()=>{this.loadMore()}),this.initData()},methods:{...y(["follow","unFollow"]),toggleFollow(){let a=this.channel;this.isFollowed?this.unFollow(a):this.follow(a)},async initData(){this.params.page=0,this.channel.id=encodeURIComponent(this.id),this.channel.name="\u52A0\u8F7D\u4E2D...",this.channel.description="\u52A0\u8F7D\u4E2D...",this.data=[],this.channel=await b(this.id),this.data=await this.loadData()},async loadData(){this.loading=!0;let a=await v(this.id,this.params);return this.isLast=a.last,this.loading=!1,a.content},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])}},computed:{...V(["follows"]),followText(){return this.isFollowed?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"},isFollowed(){let a=encodeURIComponent(this.id);return this.follows.filter(s=>(console.log(s.id,a),s.id==a)).length>0},showChannel(){return this.viewName.value!="column-view"},banner(){let a=this.data.filter(s=>s.thumbnail).sort((s,u)=>u.rank-s.rank);return a.length?{bg:a[0].thumbnail,title:"\u6700\u8FD1\u70ED\u6587: "+a[0].title}:{bg:this.lazyBannerBg}}},watch:{id(a){this.initData(),this.lazyBannerBg="",setTimeout(()=>{this.lazyBannerBg="https://images4.alphacoders.com/121/1217454.jpg"},500)}}},N={key:0},I={style:{"max-width":"1024px"},class:"mx-auto pb-3 pt-3"},M={class:"flex",style:{padding:"0 1rem"}},j=["href"],L=["href"],S=m("\u6700\u8FD1\u66F4\u65B0 "),E={key:0,class:"ma-3 mx-auto",style:{"text-align":"center"}},R=m(" \u52A0\u8F7D\u66F4\u591A "),A={key:1},U={class:"flex",style:{padding:"0 1rem"}},G=["href"];function H(a,s,u,q,J,l){const g=B("index-view");return l.showChannel?(o(),d("div",N,[t(f,{justify:"space-around"},{default:e(()=>[t(r,{width:"100%"},{default:e(()=>[t(z,{src:l.banner.bg,class:"text-white align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:"",height:"200px",title:l.banner.title},null,8,["src","title"]),i("div",I,[i("div",M,[t(h,{style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:e(()=>[i("a",{href:a.channel.link,target:"_blank"},n(a.channel.name),9,j)]),_:1}),t(c,{size:"small",color:"indigo",dark:"",textContent:n(l.followText),onClick:l.toggleFollow},null,8,["textContent","onClick"])]),t(p,{textContent:n(a.channel.description)},null,8,["textContent"]),t(w,{class:"pt-1"},{default:e(()=>[t(_,{class:"mr-3 mt-3"},{default:e(()=>[m(n(a.channel.type),1)]),_:1}),t(_,{class:"mt-3"},{default:e(()=>[i("a",{href:a.channel.link,target:"_blank"},n(a.channel.link),9,L)]),_:1})]),_:1})])]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(r,{"max-width":"1024",class:"mx-auto auto-size"},{default:e(()=>[t(h,{class:"mb-2"},{default:e(()=>[S]),_:1}),t(w,null,{default:e(()=>[t(g,{data:a.data,"load-more":l.loadMore,loading:a.loading,md:4,sm:6,xs:12},null,8,["data","load-more","loading"]),a.isLast?D("",!0):(o(),d("div",E,[t(c,{onClick:l.loadMore},{default:e(()=>[R]),_:1},8,["onClick"])]))]),_:1})]),_:1})]),_:1})])):(o(),d("div",A,[t(g,{data:a.data,"load-more":l.loadMore,loading:a.loading,md:4,sm:6,xs:12},{default:e(()=>[t(r,{flat:""},{default:e(()=>[i("div",U,[t(h,{style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:e(()=>[i("a",{href:a.channel.link,target:"_blank"},n(a.channel.name),9,G)]),_:1}),t(c,{size:"small",color:"indigo",dark:"",textContent:n(l.followText),onClick:l.toggleFollow},null,8,["textContent","onClick"])]),t(p,{textContent:n(a.channel.description),title:a.channel.description,class:"mb-3"},null,8,["textContent","title"]),t(F)]),_:1})]),_:1},8,["data","load-more","loading"])]))}const P=C(T,[["render",H]]);export{P as default};

import{ah as O,aH as Q,bv as X,a3 as L,bk as $,bl as ee,l as U,bn as te,a9 as se,aL as le,aM as ae,bw as oe,m as ie,a as e,bx as ne,H as B,bp as de,by as ue,aN as re,_ as ce,u as me,s as he,k as fe,S as _e,r as N,o as d,c as m,w as a,V as T,F as V,x as I,v as n,A as pe,y as ge,C as r,G as k,b as h,e as D,D as c,g as i,B as f,bz as we,bA as F,P as Ve,bB as ve,E as be,aY as ye,aZ as xe}from"./index.12b58c3a.js";import{m as ke,g as Se,c as Ce,u as Le,V as Ue,a as Be}from"./VTable.75a9baf9.js";import{V as Ne}from"./VSnackbar.12f61b93.js";import{V as Te,c as R,b as Ie,a as De}from"./VWindowItem.ee2d9743.js";import{b as Fe}from"./VTextField.ed6ffd1e.js";const Re=O({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Q(),...X()},emits:{"update:focused":t=>!0,"update:modelValue":()=>!0,"update:indeterminate":t=>!0},setup(t,o){let{attrs:S,slots:u}=o;const l=L(t,"indeterminate"),p=L(t,"modelValue"),{loaderClasses:v}=$(t),{isFocused:_,focus:s,blur:b}=ee(t),A=U(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),P=te(),z=U(()=>t.id||`switch-${P}`);function E(){l.value&&(l.value=!1)}return se(()=>{const[M,G]=le(S),[H,at]=ae(t),[W,ot]=oe(t),C=ie();function Y(){var g,w;(g=C.value)==null||(w=g.input)==null||w.click()}return e(re,B({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":l.value},v.value]},M,H,{id:z.value,focused:_.value}),{...u,default:g=>{let{id:w,isDisabled:Z,isReadonly:j,isValid:q}=g;return e(ne,B({ref:C},W,{modelValue:p.value,"onUpdate:modelValue":[y=>p.value=y,E],id:w.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:Z.value,readonly:j.value,onFocus:s,onBlur:b},G),{...u,default:()=>e("div",{class:"v-switch__track",onClick:Y},null),input:y=>{let{textColorClasses:J,textColorStyles:K}=y;return e("div",{class:["v-switch__thumb",J.value],style:K.value},[t.loading&&e(de,{name:"v-switch",active:!0,color:q.value===!1?void 0:A.value},{default:x=>u.loader?u.loader(x):e(ue,{active:x.isActive,color:x.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),{setBar:Ae}=me(),Pe={data(){return{tab:"\u4F18\u5148\u7EA7",items:["\u4F18\u5148\u7EA7","\u63A8\u9001\u8BBE\u7F6E"],slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},setup(){const{token:t}=he(fe());return{token:t}},components:{Skeleton:_e},methods:{...ke(["reloadFollow"]),async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let t=await Se();t.follows.forEach(o=>o.sort_copy=o.sort),this.settings=t},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollowsSort():await this.update(),this.btnLoading=!1},async changeFollowsSort(){try{let t=this.settings.follows.filter(o=>o.sort_copy!=o.sort);t.length&&(await Ce(t),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(t){console.log(t),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let t={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme,enabledNewsletterSend:this.settings.enabledNewsletterSend};await Le(t),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}}},mounted(){Ae("Rss2Newsletter","mdi:mdi-send"),this.token&&this.initData()}},ze=t=>(ye("data-v-ba3021db"),t=t(),xe(),t),Ee={class:"mt-6 mx-auto",style:{"max-width":"1210px"}},Me=i("far fa-paper-plane"),Ge=i(" Rss2Newsletter"),He=i("\u5B9A\u5236\u5C5E\u4E8E\u4F60\u7684\u4E13\u5C5E\u4FE1\u606F \u5C11\u5373\u662F\u591A; \u7F51\u4E0A\u4FE1\u606F\u6D69\u5982\u4E91\u70DF\uFF0C\u5206\u6563\u5728\u5404\u5904\uFF0C\u5982\u4F55\u89E3\u51B3\u4FE1\u606F\u8FC7\u8F7D\uFF0C\u4E00\u4E2A\u90AE\u7BB1\u5373\u53EF\u3002 "),We={class:"flex pr-4"},Ye=i("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),Ze=i("\u6DFB\u52A0\u8BA2\u9605\u6E90"),je=ze(()=>n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"\u540D\u79F0"),n("th",{class:"text-left"},"rss\u5730\u5740"),n("th",{class:"text-left"},"\u4F18\u5148\u7EA7")])],-1)),qe=["href"],Je=["onUpdate:modelValue"],Ke={key:1,class:"my-6 mx-auto text-center"},Oe=i("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),Qe=i("\u63A8\u9001\u90AE\u7BB1 "),Xe=i("\u63A8\u9001\u65F6\u95F4 "),$e=i(" 7:00-12:00 "),et=i("\u5448\u73B0\u5F62\u5F0F "),tt=i("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),st=i("\u5F00\u542F\u63A8\u9001 ");function lt(t,o,S,u,l,p){const v=N("router-link"),_=N("skeleton");return d(),m(V,null,[e(T,{class:"w-row"},{default:a(()=>[e(I,{width:"100%"},{default:a(()=>[n("div",Ee,[e(pe,null,{default:a(()=>[e(ge,{size:"small",class:"mr-2"},{default:a(()=>[Me]),_:1}),Ge]),_:1}),e(r,null,{default:a(()=>[He]),_:1}),e(Te,{modelValue:l.tab,"onUpdate:modelValue":o[0]||(o[0]=s=>l.tab=s),class:"mt-3",grow:""},{default:a(()=>[(d(!0),m(V,null,k(l.items,s=>(d(),h(De,{key:s,value:s},{default:a(()=>[i(f(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(T,{class:"w-row mt-8"},{default:a(()=>[e(I,{"max-width":"1210",class:"mx-auto auto-size"},{default:a(()=>[l.loading?(d(),h(c,{key:1,style:{"min-height":"60vh"}},{default:a(()=>[e(_,{class:"mt-3",width:"20%",height:"1em"}),(d(),m(V,null,k(6,s=>e(_,{class:"mt-6",width:"100%",height:"1.2em",key:s})),64))]),_:1})):(d(),h(Ie,{key:0,modelValue:l.tab,"onUpdate:modelValue":o[5]||(o[5]=s=>l.tab=s),style:{"min-height":"60vh"}},{default:a(()=>[e(R,{value:"\u4F18\u5148\u7EA7"},{default:a(()=>[n("div",We,[e(r,{class:"mt-6"},{default:a(()=>[Ye]),_:1}),e(D,{color:"indigo",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:a(()=>[Ze]),_:1})]),e(c,null,{default:a(()=>[l.settings.follows.length?(d(),h(Ue,{key:0,"fixed-header":"",height:"50vh"},{default:a(()=>[je,n("tbody",null,[(d(!0),m(V,null,k(l.settings.follows,s=>(d(),m("tr",{key:s.name},[n("td",null,f(s.channelName),1),n("td",null,[n("a",{target:"_blank",href:s.rssUrl,title:"\u67E5\u770Brss"},f(s.rssUrl),9,qe)]),n("td",null,[Ve(n("input",{type:"text","onUpdate:modelValue":b=>s.sort=b,class:be(["item-sort",{"item-change":s.sort!=s.sort_copy}])},null,10,Je),[[ve,s.sort]])])]))),128))])]),_:1})):(d(),m("div",Ke,[e(v,{to:"/setup"},{default:a(()=>[Oe]),_:1})]))]),_:1})]),_:1}),e(R,{value:"\u63A8\u9001\u8BBE\u7F6E"},{default:a(()=>[e(r,{class:"mt-6"},{default:a(()=>[Qe]),_:1}),e(c,{class:"px-6"},{default:a(()=>[i(f(l.settings.email),1)]),_:1}),e(r,null,{default:a(()=>[Xe]),_:1}),e(c,{class:"px-6"},{default:a(()=>[$e]),_:1}),e(r,null,{default:a(()=>[et]),_:1}),e(c,null,{default:a(()=>[e(we,{modelValue:l.settings.itemsTheme,"onUpdate:modelValue":o[1]||(o[1]=s=>l.settings.itemsTheme=s)},{default:a(()=>[e(F,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),e(F,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[tt]),_:1}),e(c,null,{default:a(()=>[e(Be,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":o[3]||(o[3]=s=>l.settings.itemsLimit=s),class:"align-center",max:l.slider.max,min:l.slider.min,step:1,"hide-details":""},{append:a(()=>[e(Fe,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":o[2]||(o[2]=s=>l.settings.itemsLimit=s),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),e(r,null,{default:a(()=>[st]),_:1}),e(c,{class:"px-6"},{default:a(()=>[e(Re,{modelValue:l.settings.enabledNewsletterSend,"onUpdate:modelValue":o[4]||(o[4]=s=>l.settings.enabledNewsletterSend=s),"hide-details":"",inset:"",label:`${l.settings.enabledNewsletterSend?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])),l.loading?(d(),h(_,{key:3,class:"ma-3",width:"64px",height:"36px"})):(d(),h(D,{key:2,loading:l.btnLoading,class:"ma-3",color:"indigo",onClick:p.save,disabled:u.token?l.tab=="\u4F18\u5148\u7EA7"&&l.settings.follows.filter(s=>s.sort_copy!=s.sort).length==0:!0},{default:a(()=>[i(f(u.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))]),_:1})]),_:1}),e(Ne,{location:"top",timeout:5e3,modelValue:l.tip.show,"onUpdate:modelValue":o[6]||(o[6]=s=>l.tip.show=s)},{default:a(()=>[i(f(l.tip.msg),1)]),_:1},8,["modelValue"])],64)}const ct=ce(Pe,[["render",lt],["__scopeId","data-v-ba3021db"]]);export{ct as default};

import{_ as F,m as T,g as B,a as L,b as M,d as N,r as c,o,e as f,h as a,w as e,V as h,F as p,i as g,j as R,k as w,n as _,p as s,t as d,q as C,s as m,u as r,v as k,x as V,c as y,y as j,z as S,A as U,B as b}from"./index.c47ea11b.js";import{V as I}from"./VChip.3e4a3081.js";const z={props:["id"],inject:["isToBottom"],data:()=>({channel:{},data:[],params:{page:0,size:20},isLast:!0,item:{},loading:!0,dialog:!1}),mounted(){this.initData()},methods:{...T(["follow","unFollow"]),toggleFollow(){let t=this.channel;this.isFollowed?this.unFollow(t):this.follow(t)},async initData(){this.params.page=0,this.channel=await B(this.id),this.data=await this.loadData()},async loadData(){this.loading=!0;let t=await L(this.id,this.params);return this.loading=!1,this.isLast=t.last,t.content},async loadMore(){this.params.page+=1,this.data=[...this.data,...await this.loadData()]},async openRead(t){this.item=await M(t),this.item.id=t,this.dialog=!0}},computed:{...N(["follows"]),followText(){return this.isFollowed?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"},isFollowed(){return this.follows.filter(t=>t.id==this.id).length>0},arrowUpItemId(){let t=this.data.length;for(let l=0;l<t;l++)if(this.data[l].id==this.item.id&&l>0)return this.data[l-1].id;return null},arrowDownItemId(){let t=this.data.length;for(let l=0;l<t;l++){let u=this.data[l];if(u.id==this.item.id&&l+3>t&&!this.isLast&&this.loadMore(),u.id==this.item.id&&l+1<t)return this.data[l+1].id}return null}},watch:{id(t){this.data=[],this.loading=!0,this.initData()},"isToBottom.value"(t){t&&!this.isLast&&this.loadMore()}}},A={style:{"max-width":"1024px"},class:"mx-auto pb-3 pt-3"},H=s("\u6700\u8FD1\u66F4\u65B0 "),q=s(" \u52A0\u8F7D\u66F4\u591A "),E=["innerHTML"],O=["href"],G=s(" \u5173\u95ED ");function J(t,l,u,K,P,n){const x=c("entry-card"),D=c("entry-card-skeleton"),v=c("c-dialog");return o(),f(p,null,[a(h,{justify:"space-around"},{default:e(()=>[a(g,{width:"100%"},{default:e(()=>[a(R,{src:"https://images4.alphacoders.com/121/1217454.jpg",class:"text-white align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:"",height:"200px"}),w("div",A,[a(_,null,{default:e(()=>[s(d(t.channel.name),1)]),_:1}),a(C,null,{default:e(()=>[a(I,{class:"mr-4"},{default:e(()=>[s(d(t.channel.type),1)]),_:1}),a(I,null,{default:e(()=>[s(d(t.channel.link),1)]),_:1})]),_:1}),a(m,null,{default:e(()=>[a(r,{color:"indigo",dark:"",textContent:d(n.followText),onClick:n.toggleFollow},null,8,["textContent","onClick"])]),_:1})])]),_:1})]),_:1}),a(h,null,{default:e(()=>[a(g,{"max-width":"1024",class:"mx-auto auto-size"},{default:e(()=>[a(_,{class:"mb-2"},{default:e(()=>[H]),_:1}),a(m,null,{default:e(()=>[a(h,{dense:""},{default:e(()=>[(o(!0),f(p,null,k(t.data,i=>(o(),y(b,{key:i.id,md:4,sm:6,xs:12},{default:e(()=>[a(x,{"img-src":i.thumbnail,title:i.title,"channel-name":i.channelName,"pub-date":i.pubDate,"channel-id":i.channelId,onClick:Q=>n.openRead(i.id)},{default:e(()=>[a(m,{textContent:d(i.summary)},null,8,["textContent"])]),_:2},1032,["img-src","title","channel-name","pub-date","channel-id","onClick"])]),_:2},1024))),128)),t.loading?(o(),f(p,{key:0},k(20,i=>a(b,{key:i,md:4,sm:6,xs:12},{default:e(()=>[a(D)]),_:2},1024)),64)):V("",!0)]),_:1}),a(h,{class:"ma-3"},{default:e(()=>[t.isLast?V("",!0):(o(),y(r,{key:0,class:"mx-auto",onClick:n.loadMore},{default:e(()=>[q]),_:1},8,["onClick"]))]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{modelValue:t.dialog,"onUpdate:modelValue":l[3]||(l[3]=i=>t.dialog=i)},{default:e(()=>[a(g,null,{default:e(()=>[a(m,null,{default:e(()=>[a(_,{class:"text-h5"},{default:e(()=>[s(d(t.item.title),1)]),_:1}),a(C,null,{default:e(()=>[s(d(t.item.channelName),1)]),_:1}),w("p",{class:"read-main mx-auto mt-3",innerHTML:t.item.description},null,8,E)]),_:1}),a(j),a(S,null,{default:e(()=>[w("a",{href:t.item.link,target:"_blank",class:"pl-3"},"\u67E5\u770B\u539F\u6587",8,O),a(r,{icon:"mdi-arrow-left",title:"\u4E0A\u4E00\u6761",disabled:!n.arrowUpItemId,onClick:l[0]||(l[0]=i=>n.openRead(n.arrowUpItemId))},null,8,["disabled"]),a(U),a(r,{icon:"mdi-arrow-right",title:"\u4E0B\u4E00\u6761",disabled:!n.arrowDownItemId,onClick:l[1]||(l[1]=i=>n.openRead(n.arrowDownItemId))},null,8,["disabled"]),a(r,{text:"",onClick:l[2]||(l[2]=i=>t.dialog=!1)},{default:e(()=>[G]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Y=F(z,[["render",J]]);export{Y as default};

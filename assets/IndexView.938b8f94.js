import{_ as U,r as $,o as a,c as p,d as o,w as d,F as x,N as C,e as k,O as B,P as I,g as w,V as D,t as v,Q as H,q as A,S as F,C as u,H as z,j as P,R as M,T as j,x as V,U as Q,W as X,X as Y,D as G,Y as S,Z,i as J,v as T,p as K,A as O,B as E,G as m,$ as ee}from"./index.814d0186.js";import{R as L}from"./Reader.e0a4ac5c.js";const te={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],methods:{openRead(e){this.$emit("click-item-read",e)}}},le={key:0,class:"text-align pa-3"};function ae(e,i,s,n,b,f){const y=$("entry-card"),_=$("entry-card-skeleton"),t=$("c-dialog");return a(),p(x,null,[o(D,{dense:""},{default:d(()=>[(a(!0),p(x,null,C(s.data,l=>(a(),k(I,B({key:l.id},e.$attrs),{default:d(()=>[o(y,{"img-src":l.thumbnail,"channel-icon":l.channelIcon,title:l.title,"channel-name":l.channelName,"pub-date":l.pubDate,"channel-id":l.channelId,onClick:R=>f.openRead(l.id)},null,8,["img-src","channel-icon","title","channel-name","pub-date","channel-id","onClick"])]),_:2},1040))),128)),s.loading?(a(),p(x,{key:0},C(20,l=>o(I,B({key:l},e.$attrs),{default:d(()=>[o(_)]),_:2},1040)),64)):w("",!0)]),_:1}),!s.loading&&s.isLast?(a(),p("div",le,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),o(t,{"model-value":s.showReader,"onUpdate:modelValue":i[0]||(i[0]=l=>e.$emits("update:showReader",l))},{default:d(()=>[H(e.$slots,"default")]),_:3},8,["model-value"])],64)}const ne=U(te,[["render",ae]]);const oe={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],setup(){const{mobile:e}=A();return{mobile:e}},components:{Skeleton:F},computed:{isChannel(){return this.$route.fullPath.indexOf("channel")>0}},methods:{openRead(e){this.$emit("click-item-read",e)},log(e){console.log(e),this.openRead(e.id)}}},se={class:"grid-2-between"},de={class:"grid-2"},ie=["onClick"],re={class:"text-ellipsis mr-3 title"},ue={style:{"max-width":"600px",display:"inline-block"},class:"text-ellipsis"},ce={key:0,style:{"font-size":"0.75em"}},he={class:"flex"},fe={key:0,class:"text-center pa-3"};function _e(e,i,s,n,b,f){const y=$("router-link"),_=$("skeleton"),t=$("c-dialog");return a(),p("div",null,[o(j,{density:"compact"},{default:d(()=>[(a(!0),p(x,null,C(s.data,l=>(a(),k(M,{key:l.id,value:l.id,onClick:R=>f.openRead(l.id)},{default:d(()=>[u("div",se,[u("div",de,[f.isChannel?w("",!0):(a(),k(y,{key:0,tabindex:"-1",style:z([{display:"inline-block","font-size":"0.75em"},{width:n.mobile?"80px":"150px"}]),class:"text-ellipsis",to:"/channel/"+l.channelId},{default:d(()=>[P(v(l.channelName),1)]),_:2},1032,["style","to"])),u("div",{class:"grid-2 hover",onClick:R=>f.openRead(l.id)},[u("div",re,v(l.title),1),u("small",ue,v(l.summary),1)],8,ie)]),n.mobile?w("",!0):(a(),p("small",ce,v(l.pubDate),1))])]),_:2},1032,["value","onClick"]))),128)),s.loading?(a(),p(x,{key:0},C(20,l=>o(M,{key:l,value:l},{default:d(()=>[u("div",he,[o(_,{height:"0.8em",width:"70%"}),o(_,{height:"0.8em",width:"50px"})])]),_:2},1032,["value"])),64)):w("",!0)]),_:1}),!s.loading&&s.isLast?(a(),p("div",fe,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),o(t,{"model-value":s.showReader,"onUpdate:modelValue":i[0]||(i[0]=l=>e.$emits("update:showReader",l))},{default:d(()=>[H(e.$slots,"default",{},void 0,!0)]),_:3},8,["model-value"])])}const me=U(oe,[["render",_e],["__scopeId","data-v-33d83b0b"]]);function pe(e,i,s=()=>{}){i=i||e;let n=!0;const b=V(0),f=V(0),y=V(0),_=V(!1);return Q(e,"scroll",t=>{if(b.value=i.scrollTop,f.value=i.scrollHeight,y.value=i.clientHeight,n){let l=i.scrollTop+i.clientHeight+120>i.scrollHeight;l&&s(),_.value=l,n=!1}setTimeout(()=>{_.value=!1,n=!0},300)}),{scrollTop:b,scrollHeight:f,clientHeight:y,isScrollBottom:_}}const ye={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read"],setup(){const{mobile:e}=A();return{mobile:e}},data:()=>({channelRefHeight:0}),mounted(){pe(this.$refs.listRef.$el,null,this.loadMore),this.mobile||setTimeout(()=>{this.$refs.channelRef.clientHeight&&(this.channelRefHeight=this.$refs.channelRef.clientHeight)},1e3)},components:{Skeleton:F},computed:{maxHeight(){return"calc(100vh - "+(this.channelRefHeight+70)+"px)"},isChannel(){return this.$route.fullPath.indexOf("channel")>0}},watch:{$route(){this.$refs.listRef.$el.scrollTop=0}},methods:{async openRead(e){this.$emit("click-item-read",e)}}},ve={ref:"channelRef"},ge=["onClick"],ke={style:{}},we=["textContent"],xe=["textContent"],$e={class:"flex"},Re={key:1},Ce=["textContent"],be={class:"item"},Ve={class:"flex"},Be={key:1,class:"text-center pa-3"},Ie={class:"box"};function He(e,i,s,n,b,f){const y=$("router-link"),_=$("skeleton");return a(),k(D,{dense:""},{default:d(()=>[X(o(I,{xl:3,lg:4,md:6,sm:12},{default:d(()=>[o(G,null,{default:d(()=>[u("div",ve,[H(e.$slots,"channel",{},void 0,!0)],512),o(j,{"select-strategy":"independent",ref:"listRef",variant:"text",class:"over-y",style:z({maxHeight:f.maxHeight}),density:"compact"},{default:d(()=>[(a(!0),p(x,null,C(s.data,t=>(a(),k(M,{class:"py-2",key:t.id,value:"article/"+t.id,onClick:l=>f.openRead(t.id)},{default:d(()=>[u("div",{class:"item",onClick:l=>f.openRead(t.id)},[o(S,{src:t.thumbnail?t.thumbnail:"/card-thumb.jpg",class:"white--text align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"80px",cover:""},null,8,["src"]),u("div",ke,[u("div",{textContent:v(t.title),style:{"font-size":"0.9em"}},null,8,we),u("small",{style:{display:"block"},textContent:v(t.summary)},null,8,xe),u("div",$e,[f.isChannel?(a(),p("span",Re)):(a(),k(y,{key:0,tabindex:"-1",style:{"font-size":"0.8em"},class:"text-ellipsis",to:"/channel/"+t.channelId},{default:d(()=>[P(v(t.channelName),1)]),_:2},1032,["to"])),u("small",{textContent:v(t.pubDate)},null,8,Ce)])])],8,ge)]),_:2},1032,["value","onClick"]))),128)),s.loading?(a(),p(x,{key:0},C(20,t=>o(M,{class:"py-2",key:t},{default:d(()=>[u("div",be,[o(S,{class:"white--text align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"80px",cover:""}),u("div",null,[o(_,{height:"0.8em",width:"calc(1oo% - 100px)"}),o(_,{height:"0.7em",width:"calc(1oo% - 100px)"}),u("div",Ve,[o(_,{height:"0.6em",width:"100px"}),o(_,{height:"0.6em",width:"50px"})])])])]),_:2},1024)),64)):w("",!0),!s.loading&&s.isLast?(a(),p("div",Be,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0)]),_:1},8,["style"])]),_:3})]),_:3},512),[[Y,!(n.mobile&&s.showReader)]]),o(Z,{name:"list"},{default:d(()=>[s.showReader?(a(),k(I,{key:0,xl:9,lg:8,md:6,sm:12},{default:d(()=>[u("div",Ie,[H(e.$slots,"default",{},void 0,!0)])]),_:3})):w("",!0)]),_:3})]),_:3})}const Le=U(ye,[["render",He],["__scopeId","data-v-7742abe2"]]);const Me={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],setup(){const{mobile:e}=A();return{mobile:e}},components:{Skeleton:F},compute:{isChannel(){return this.$route.fullPath.indexOf("channel")>0}},methods:{openRead(e){this.$emit("click-item-read",e)},log(e){console.log(e),this.openRead(e.id)}}},Ue={class:"art"},Ne=["textContent","title","onClick"],Te=["href"],De={style:{"font-size":"0.75em"}},Ae={class:"art"},Fe={key:0,class:"text-center pa-3"};function Se(e,i,s,n,b,f){const y=$("skeleton"),_=$("c-dialog");return a(),p("div",null,[o(G,{class:"py-2",flat:""},{default:d(()=>[o(D,{dense:""},{default:d(()=>[(a(!0),p(x,null,C(s.data,t=>(a(),k(I,B({key:t.id},e.$attrs),{default:d(()=>[u("article",Ue,[u("span",{class:"title",textContent:v(t.channelName+"\u300A"+t.title+"\u300B"),title:t.title,onClick:l=>f.openRead(t.id)},null,8,Ne),u("a",{href:t.link},[u("small",De,v(t.pubDate),1)],8,Te)])]),_:2},1040))),128)),s.loading?(a(),p(x,{key:0},C(20,t=>o(I,B({key:t},e.$attrs),{default:d(()=>[u("article",Ae,[o(y,{height:"1em",width:"100%"}),o(y,{height:"0.8em",width:"36px"})])]),_:2},1040)),64)):w("",!0)]),_:1})]),_:1}),!s.loading&&s.isLast?(a(),p("div",Fe,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),o(_,{"model-value":s.showReader,"onUpdate:modelValue":i[0]||(i[0]=t=>e.$emits("update:showReader",t))},{default:d(()=>[H(e.$slots,"default",{},void 0,!0)]),_:3},8,["model-value"])])}const Oe=U(Me,[["render",Se],["__scopeId","data-v-ca4b1615"]]),ze={style:{display:"none"}},Pe=["href","textContent"],We={__name:"IndexView",props:["loadMore","data","loading","isLast"],setup(e){const i=e,s=J("currentViewName"),n=V({}),b=V(void 0),f=i.loadMore,y=T(()=>i.data),_=T(()=>i.loading),t=T(()=>i.isLast),l=K();O(n,h=>{h.id&&(l.pushHash("/article/"+h.id),document.title=(h.title||"")+" | WebFollow")}),O(b,h=>{R(h)});async function R(h){n.value=await ee(h),n.value.id=h}const W=h=>{let r=n.value.id,c=h.length;for(let g=0;g<c;g++)if(h[g].id==r&&g>0)return h[g-1].id;return null};function q(h){let r=n.value.id,c=h.length;for(let g=0;g<c;g++){let N=h[g];if(N.id==r&&g+3>c&&f(),N.id==r&&g+1<c)return h[g+1].id}return null}return E(async h=>{let r;h.detail=="up"?r=W(y.value):h.detail=="down"&&(r=q(y.value)),r&&R(r)}),(h,r)=>(a(),p(x,null,[u("ul",ze,[(a(!0),p(x,null,C(m(y),c=>(a(),p("li",{key:c.id},[u("a",{href:"/article/"+c.id,textContent:v(c.title)},null,8,Pe)]))),128))]),m(s)=="cards-view"?(a(),k(ne,B({key:0,loadMore:m(f),data:m(y),loading:m(_)},h.$attrs,{"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":r[1]||(r[1]=c=>n.value.id=c),onClickItemRead:R}),{default:d(()=>[o(L,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},16,["loadMore","data","loading","is-last","show-reader"])):m(s)=="title-only-view"?(a(),k(me,{key:1,"load-more":m(f),data:m(y),loading:m(_),"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":r[3]||(r[3]=c=>n.value.id=c),onClickItemRead:R},{default:d(()=>[o(L,{modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},8,["load-more","data","loading","is-last","show-reader"])):m(s)=="geek-view"?(a(),k(Oe,B({key:2},h.$attrs,{"load-more":m(f),data:m(y),loading:m(_),"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":r[5]||(r[5]=c=>n.value.id=c),onClickItemRead:R}),{default:d(()=>[o(L,{modelValue:n.value,"onUpdate:modelValue":r[4]||(r[4]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},16,["load-more","data","loading","is-last","show-reader"])):(a(),k(Le,{key:3,"load-more":m(f),data:m(y),loading:m(_),"show-reader":n.value.id,"is-last":m(t),onClickItemRead:R},{default:d(()=>[o(L,{modelValue:n.value,"onUpdate:modelValue":r[6]||(r[6]=c=>n.value=c),"over-y":!0},null,8,["modelValue"])]),_:1},8,["load-more","data","loading","show-reader","is-last"]))],64))}};export{We as _,pe as u};

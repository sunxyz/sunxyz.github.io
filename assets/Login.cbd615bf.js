import{V as T,a as b,g as C}from"./VLayout.becbcae2.js";import{_ as B,u as F,k as S,aQ as U,U as I,m as d,n as A,o as c,c as D,a,w as t,F as G,bF as L,bG as N,A as R,bH as z,bI as E,x as H,b as _,B as v,D as y,C as M,e as Q,g as f,v as m}from"./index.3bdc7118.js";import{V as W}from"./VSnackbar.5aca1201.js";import{b as j}from"./VTextField.f88e96fc.js";const q={setup(){const{setBar:x}=F(),{setUserInfo:o}=S(),{reloadFollow:p}=U(),e=I(),s=d(void 0),n=A({show:!1,text:void 0}),l=d(!1),i=d(void 0);x("\u767B\u9646");let V="";async function g(){if(l.value=!0,s.value)try{V=await b({email:s.value}),i.value="\u8BA4\u8BC1\u4E2D...... \u8BF7\u6CE8\u610F\u67E5\u6536\u90AE\u4EF6\u8BA4\u8BC1",h(),l.value=!1}catch{n.text="\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5!",n.show=!0,l.value=!1}else n.text="\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740",n.show=!0,l.value=!1}function h(){async function u(){let w=await C({key:V});clearInterval(r),i.value="\u8BA4\u8BC1\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C\u9996\u9875",k(w,()=>{setTimeout(()=>{e.push("/")},3e3)})}let r=setInterval(u,5e3);setTimeout(()=>{clearInterval(r),i.value="\u8BA4\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",setTimeout(()=>{i.value=void 0},3e3)},6e4)}async function k(u,r){setUser({username:s.value}),o({username:s.value},u),p(),r()}return{email:s,tip:n,loading:l,authText:i,login:g}}},J=m("div",{style:{display:"flex","align-items":"end"}},[m("div",{class:"mr-6"},"WebFollow"),m("small",null,"\u767B\u9646")],-1),K=f("\u8BF7\u767B\u9646"),O=f(" \u767B\u9646 ");function P(x,o,p,e,s,n){return c(),D(G,null,[a(T,null,{default:t(()=>[a(L,{color:"indigo",density:"prominent"},{default:t(()=>[a(N,{class:"mx-auto","max-width":"1024px"},{default:t(()=>[a(R,{class:"mt-6"},{default:t(()=>[J]),_:1})]),_:1})]),_:1}),a(z,null,{default:t(()=>[a(E,null,{default:t(()=>[a(H,{"max-width":"480px",class:"mx-auto",style:{"margin-top":"-36px","z-index":"10000"}},{default:t(()=>[e.authText?(c(),_(y,{key:0,textContent:v(e.authText),class:"my-12 text-align"},null,8,["textContent"])):(c(),_(y,{key:1},{default:t(()=>[a(M,{class:"mt-3"},{default:t(()=>[K]),_:1}),a(j,{"hide-details":"auto",label:"\u90AE\u7BB1\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740",type:"email",class:"my-4",modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=l=>e.email=l)},null,8,["modelValue"]),a(Q,{block:"",color:"indigo",loading:e.loading,onClick:e.login},{default:t(()=>[O]),_:1},8,["loading","onClick"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),a(W,{modelValue:e.tip.show,"onUpdate:modelValue":o[1]||(o[1]=l=>e.tip.show=l)},{default:t(()=>[f(v(e.tip.text),1)]),_:1},8,["modelValue"])],64)}const ee=B(q,[["render",P]]);export{ee as default};

import{_ as S,m as F,l as B,f as E,g,r as D,o as r,c as i,w as e,V as c,a as s,b as h,d as f,e as N,h as $,i as x,j as m,v as _,k as V,n as k,F as w,p as b,q as y,s as n,t as I,u as C}from"./index.c54df054.js";import{V as R,a as v,b as U,c as A}from"./VTextField.46bb1885.js";import{V as j,a as q}from"./VChip.a3cb666a.js";const G={data:()=>({tab:null,data:[],showSuccess:!1,rssUrl:void 0}),mounted(){this.initData()},methods:{...F(["follow"]),async initData(){let t=await B(),l={};for(let a of t){let o=l[a.type];o||(o=[],l[a.type]=o),o.push(a)}this.data=[];for(let a in l)this.data.push({type:a,items:l[a],checks:[]})},ok(){let t=[];this.data.forEach(l=>{let a={};l.items.forEach(o=>{a[o.id]=o}),l.checks.forEach(o=>{t.push(a[o])})}),t.forEach(l=>this.follow(l)),this.showSuccess=!0,setTimeout(()=>{this.$router.push("/")},3e3)},async followRss(){if(this.rssUrl){let t=await E({rssUrl:this.rssUrl}),l=await g(t);this.follow(l),this.showSuccess=!0,setTimeout(()=>{this.$router.push("/")},3e3)}else alert("\u64CD\u4F5C\u5931\u8D25")}}},L=n("mdi-access-point-plus"),M=n("\u6DFB\u52A0\u8BA2\u9605"),z=n("mdi-playlist-plus"),H=n("mdi-rss"),J=["textContent"],K=n(" \u8BA2\u9605\u6210\u529F , \u5373\u5C06\u8DF3\u8F6C\u9996\u9875..."),O=n(" \u8BA2\u9605 "),P=n(" \u8BA2\u9605 "),Q=n(" \u8BA2\u9605\u6210\u529F , \u5373\u5C06\u8DF3\u8F6C\u9996\u9875...");function W(t,l,a,o,X,p){const T=D("v-tabs-slider");return r(),i(c,null,{default:e(()=>[s(x,{color:"deep-purple accent-4",flat:"",dark:""},{extension:e(()=>[s(R,{modelValue:t.tab,"onUpdate:modelValue":l[0]||(l[0]=d=>t.tab=d),"fixed-tabs":""},{default:e(()=>[s(T),s(v,{value:"channelFollow"},{default:e(()=>[s(h,null,{default:e(()=>[z]),_:1})]),_:1}),s(v,{value:"rssFollow"},{default:e(()=>[s(h,null,{default:e(()=>[H]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:e(()=>[s(f,{icon:""},{default:e(()=>[s(h,null,{default:e(()=>[L]),_:1})]),_:1}),s(N,null,{default:e(()=>[M]),_:1}),s($)]),_:1}),m(s(c,{flat:""},{default:e(()=>[(r(!0),V(w,null,k(t.data,d=>(r(),i(y,{key:d.type},{default:e(()=>[I("h2",{class:"text-h6 mb-2",textContent:C(d.type)},null,8,J),s(j,{modelValue:d.checks,"onUpdate:modelValue":u=>d.checks=u,column:"",multiple:""},{default:e(()=>[(r(!0),V(w,null,k(d.items,u=>(r(),i(q,{key:u.id,value:u.id,filter:"",outlined:""},{default:e(()=>[n(C(u.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128)),t.showSuccess?(r(),i(U,{key:0,class:"ma-4",type:"success"},{default:e(()=>[K]),_:1})):b("",!0),s(f,{class:"ma-4",color:"deep-purple",rounded:"pill",onClick:p.ok},{default:e(()=>[O]),_:1},8,["onClick"])]),_:1},512),[[_,t.tab=="channelFollow"]]),m(s(c,{flat:""},{default:e(()=>[s(y,null,{default:e(()=>[s(A,{class:"my-4",flat:"","hide-details":"",label:"\u8F93\u5165rss\u8BA2\u9605\u5730\u5740","prepend-inner-icon":"mdi-rss","solo-inverted":"",modelValue:t.rssUrl,"onUpdate:modelValue":l[1]||(l[1]=d=>t.rssUrl=d)},null,8,["modelValue"]),s(f,{block:"",color:"deep-purple",rounded:"pill",onClick:p.followRss},{default:e(()=>[P]),_:1},8,["onClick"]),t.showSuccess?(r(),i(U,{key:0,class:"mt-4",type:"success"},{default:e(()=>[Q]),_:1})):b("",!0)]),_:1})]),_:1},512),[[_,t.tab=="rssFollow"]])]),_:1})}const se=S(G,[["render",W]]);export{se as default};

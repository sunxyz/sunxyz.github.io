import{_ as U,r as x,o as a,c as p,d as s,w as d,F as $,N as C,e as k,O as B,P as I,g as w,V as T,t as v,Q as H,q as D,S as A,C as i,H as z,j as P,R as M,T as j,x as V,U as Q,W as X,X as Y,D as G,Y as F,Z,$ as J,a0 as K,i as E,v as S,p as ee,A as O,B as te,G as m,a1 as le}from"./index.58c4f061.js";import{R as L}from"./Reader.6c645e2d.js";const ae={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],methods:{openRead(e){this.$emit("click-item-read",e)}}},ne={key:0,class:"text-align pa-3"};function oe(e,r,o,n,b,f){const y=x("entry-card"),_=x("entry-card-skeleton"),t=x("c-dialog");return a(),p($,null,[s(T,{dense:""},{default:d(()=>[(a(!0),p($,null,C(o.data,l=>(a(),k(I,B({key:l.id},e.$attrs),{default:d(()=>[s(y,{"img-src":l.thumbnail,"channel-icon":l.channelIcon,title:l.title,"channel-name":l.channelName,"pub-date":l.pubDate,"channel-id":l.channelId,onClick:R=>f.openRead(l.id)},null,8,["img-src","channel-icon","title","channel-name","pub-date","channel-id","onClick"])]),_:2},1040))),128)),o.loading?(a(),p($,{key:0},C(20,l=>s(I,B({key:l},e.$attrs),{default:d(()=>[s(_)]),_:2},1040)),64)):w("",!0)]),_:1}),!o.loading&&o.isLast?(a(),p("div",ne,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),s(t,{"model-value":o.showReader,"onUpdate:modelValue":r[0]||(r[0]=l=>e.$emits("update:showReader",l))},{default:d(()=>[H(e.$slots,"default")]),_:3},8,["model-value"])],64)}const se=U(ae,[["render",oe]]);const de={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],setup(){const{mobile:e}=D();return{mobile:e}},components:{Skeleton:A},computed:{isChannel(){return this.$route.fullPath.indexOf("channel")>0}},methods:{openRead(e){this.$emit("click-item-read",e)},log(e){console.log(e),this.openRead(e.id)}}},ie={class:"grid-2-between"},re={class:"grid-2"},ue=["onClick"],ce={class:"text-ellipsis mr-3 title"},he={style:{"max-width":"600px",display:"inline-block"},class:"text-ellipsis"},fe={key:0,style:{"font-size":"0.75em"}},_e={class:"flex"},me={key:0,class:"text-center pa-3"};function pe(e,r,o,n,b,f){const y=x("router-link"),_=x("skeleton"),t=x("c-dialog");return a(),p("div",null,[s(j,{density:"compact"},{default:d(()=>[(a(!0),p($,null,C(o.data,l=>(a(),k(M,{key:l.id,value:l.id,onClick:R=>f.openRead(l.id)},{default:d(()=>[i("div",ie,[i("div",re,[f.isChannel?w("",!0):(a(),k(y,{key:0,tabindex:"-1",style:z([{display:"inline-block","font-size":"0.75em"},{width:n.mobile?"80px":"150px"}]),class:"text-ellipsis",to:"/channel/"+l.channelId},{default:d(()=>[P(v(l.channelName),1)]),_:2},1032,["style","to"])),i("div",{class:"grid-2 hover",onClick:R=>f.openRead(l.id)},[i("div",ce,v(l.title),1),i("small",he,v(l.summary),1)],8,ue)]),n.mobile?w("",!0):(a(),p("small",fe,v(l.pubDate),1))])]),_:2},1032,["value","onClick"]))),128)),o.loading?(a(),p($,{key:0},C(20,l=>s(M,{key:l,value:l},{default:d(()=>[i("div",_e,[s(_,{height:"0.8em",width:"70%"}),s(_,{height:"0.8em",width:"50px"})])]),_:2},1032,["value"])),64)):w("",!0)]),_:1}),!o.loading&&o.isLast?(a(),p("div",me,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),s(t,{"model-value":o.showReader,"onUpdate:modelValue":r[0]||(r[0]=l=>e.$emits("update:showReader",l))},{default:d(()=>[H(e.$slots,"default",{},void 0,!0)]),_:3},8,["model-value"])])}const ye=U(de,[["render",pe],["__scopeId","data-v-33d83b0b"]]);function ve(e,r,o=()=>{}){r=r||e;let n=!0;const b=V(0),f=V(0),y=V(0),_=V(!1);return Q(e,"scroll",t=>{if(b.value=r.scrollTop,f.value=r.scrollHeight,y.value=r.clientHeight,n){let l=r.scrollTop+r.clientHeight+120>r.scrollHeight;l&&o(),_.value=l,n=!1}setTimeout(()=>{_.value=!1,n=!0},300)}),{scrollTop:b,scrollHeight:f,clientHeight:y,isScrollBottom:_}}const ge={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read"],setup(){const{mobile:e}=D();return{mobile:e}},data:()=>({channelRefHeight:0}),mounted(){ve(this.$refs.listRef.$el,null,this.loadMore),this.mobile||setTimeout(()=>{this.$refs.channelRef.clientHeight&&(this.channelRefHeight=this.$refs.channelRef.clientHeight)},1e3)},components:{Skeleton:A},computed:{maxHeight(){return"calc(100vh - "+(this.channelRefHeight+70)+"px)"},isChannel(){return this.$route.fullPath.indexOf("channel")>0}},watch:{$route(){this.$refs.listRef.$el.scrollTop=0}},methods:{async openRead(e){this.$emit("click-item-read",e)}}},ke={ref:"channelRef"},we=["onClick"],$e={style:{}},xe=["textContent"],Re=["textContent"],Ce={class:"flex"},be={key:1},Ve=["textContent"],Be={class:"item"},Ie={class:"flex"},He={key:1,class:"text-center pa-3"},Le={class:"box"};function Me(e,r,o,n,b,f){const y=x("router-link"),_=x("skeleton");return a(),k(T,{dense:""},{default:d(()=>[X(s(I,{xl:3,lg:4,md:6,sm:12},{default:d(()=>[s(G,null,{default:d(()=>[i("div",ke,[H(e.$slots,"channel",{},void 0,!0)],512),s(j,{"select-strategy":"independent",ref:"listRef",variant:"text",class:"over-y",style:z({maxHeight:f.maxHeight}),density:"compact"},{default:d(()=>[(a(!0),p($,null,C(o.data,t=>(a(),k(M,{class:"py-2",key:t.id,value:"article/"+t.id,onClick:l=>f.openRead(t.id)},{default:d(()=>[i("div",{class:"item",onClick:l=>f.openRead(t.id)},[s(F,{src:t.thumbnail?t.thumbnail:"/card-thumb.jpg",class:"white--text align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"80px",cover:""},null,8,["src"]),i("div",$e,[i("div",{textContent:v(t.title),style:{"font-size":"0.9em"}},null,8,xe),i("small",{style:{display:"block"},textContent:v(t.summary)},null,8,Re),i("div",Ce,[f.isChannel?(a(),p("span",be)):(a(),k(y,{key:0,tabindex:"-1",style:{"font-size":"0.8em"},class:"text-ellipsis",to:"/channel/"+t.channelId},{default:d(()=>[P(v(t.channelName),1)]),_:2},1032,["to"])),i("small",{textContent:v(t.pubDate)},null,8,Ve)])])],8,we)]),_:2},1032,["value","onClick"]))),128)),o.loading?(a(),p($,{key:0},C(20,t=>s(M,{class:"py-2",key:t},{default:d(()=>[i("div",Be,[s(F,{class:"white--text align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"80px",cover:""}),i("div",null,[s(_,{height:"0.8em",width:"calc(1oo% - 100px)"}),s(_,{height:"0.7em",width:"calc(1oo% - 100px)"}),i("div",Ie,[s(_,{height:"0.6em",width:"100px"}),s(_,{height:"0.6em",width:"50px"})])])])]),_:2},1024)),64)):w("",!0),!o.loading&&o.isLast?(a(),p("div",He,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0)]),_:1},8,["style"])]),_:3})]),_:3},512),[[Y,!(n.mobile&&o.showReader)]]),s(Z,{name:"list"},{default:d(()=>[o.showReader?(a(),k(I,{key:0,xl:9,lg:8,md:6,sm:12},{default:d(()=>[i("div",Le,[H(e.$slots,"default",{},void 0,!0)])]),_:3})):w("",!0)]),_:3})]),_:3})}const Ue=U(ge,[["render",Me],["__scopeId","data-v-7742abe2"]]);const Ne={props:{loadMore:{type:Function,default:()=>()=>{}},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showReader:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},emits:["click-item-read","update:showReader"],setup(){const{mobile:e}=D();return{mobile:e}},components:{Skeleton:A},compute:{isChannel(){return this.$route.fullPath.indexOf("channel")>0}},methods:{openRead(e){this.$emit("click-item-read",e)},log(e){console.log(e),this.openRead(e.id)}}},Se=e=>(J("data-v-6c237d67"),e=e(),K(),e),Te={class:"art"},De=["textContent","title","onClick"],Ae=["href"],Fe={style:{"font-size":"0.75em"}},Oe={class:"art"},ze=Se(()=>i("small",null,null,-1)),Pe={key:0,class:"text-center pa-3"};function je(e,r,o,n,b,f){const y=x("skeleton"),_=x("c-dialog");return a(),p("div",null,[s(G,{class:"py-2",flat:""},{default:d(()=>[s(T,{dense:""},{default:d(()=>[(a(!0),p($,null,C(o.data,t=>(a(),k(I,B({key:t.id},e.$attrs),{default:d(()=>[i("article",Te,[i("span",{class:"title",textContent:v(t.channelName+"\u300A"+t.title+"\u300B"),title:t.title,onClick:l=>f.openRead(t.id)},null,8,De),i("a",{href:t.link},[i("small",Fe,v(t.pubDate),1)],8,Ae)])]),_:2},1040))),128)),o.loading?(a(),p($,{key:0},C(20,t=>s(I,B({key:t},e.$attrs),{default:d(()=>[i("article",Oe,[s(y,{height:"1em"}),ze])]),_:2},1040)),64)):w("",!0)]),_:1})]),_:1}),!o.loading&&o.isLast?(a(),p("div",Pe,v(e.$vuetify.locale.t("notMoreBtn")),1)):w("",!0),s(_,{"model-value":o.showReader,"onUpdate:modelValue":r[0]||(r[0]=t=>e.$emits("update:showReader",t))},{default:d(()=>[H(e.$slots,"default",{},void 0,!0)]),_:3},8,["model-value"])])}const Ge=U(Ne,[["render",je],["__scopeId","data-v-6c237d67"]]),We={style:{display:"none"}},qe=["href","textContent"],Ye={__name:"IndexView",props:["loadMore","data","loading","isLast"],setup(e){const r=e,o=E("currentViewName"),n=V({}),b=V(void 0),f=r.loadMore,y=S(()=>r.data),_=S(()=>r.loading),t=S(()=>r.isLast),l=ee();O(n,h=>{h.id&&(l.pushHash("/article/"+h.id),document.title=(h.title||"")+" | WebFollow")}),O(b,h=>{R(h)});async function R(h){n.value=await le(h),n.value.id=h}const W=h=>{let u=n.value.id,c=h.length;for(let g=0;g<c;g++)if(h[g].id==u&&g>0)return h[g-1].id;return null};function q(h){let u=n.value.id,c=h.length;for(let g=0;g<c;g++){let N=h[g];if(N.id==u&&g+3>c&&f(),N.id==u&&g+1<c)return h[g+1].id}return null}return te(async h=>{let u;h.detail=="up"?u=W(y.value):h.detail=="down"&&(u=q(y.value)),u&&R(u)}),(h,u)=>(a(),p($,null,[i("ul",We,[(a(!0),p($,null,C(m(y),c=>(a(),p("li",{key:c.id},[i("a",{href:"/article/"+c.id,textContent:v(c.title)},null,8,qe)]))),128))]),m(o)=="cards-view"?(a(),k(se,B({key:0,loadMore:m(f),data:m(y),loading:m(_)},h.$attrs,{"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":u[1]||(u[1]=c=>n.value.id=c),onClickItemRead:R}),{default:d(()=>[s(L,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},16,["loadMore","data","loading","is-last","show-reader"])):m(o)=="title-only-view"?(a(),k(ye,{key:1,"load-more":m(f),data:m(y),loading:m(_),"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":u[3]||(u[3]=c=>n.value.id=c),onClickItemRead:R},{default:d(()=>[s(L,{modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},8,["load-more","data","loading","is-last","show-reader"])):m(o)=="geek-view"?(a(),k(Ge,B({key:2},h.$attrs,{"load-more":m(f),data:m(y),loading:m(_),"is-last":m(t),"show-reader":n.value.id,"onUpdate:show-reader":u[5]||(u[5]=c=>n.value.id=c),onClickItemRead:R}),{default:d(()=>[s(L,{modelValue:n.value,"onUpdate:modelValue":u[4]||(u[4]=c=>n.value=c),"ctrl-style":"position:fixed"},null,8,["modelValue"])]),_:1},16,["load-more","data","loading","is-last","show-reader"])):(a(),k(Ue,{key:3,"load-more":m(f),data:m(y),loading:m(_),"show-reader":n.value.id,"is-last":m(t),onClickItemRead:R},{default:d(()=>[s(L,{modelValue:n.value,"onUpdate:modelValue":u[6]||(u[6]=c=>n.value=c),"over-y":!0},null,8,["modelValue"])]),_:1},8,["load-more","data","loading","show-reader","is-last"]))],64))}};export{Ye as _,ve as u};

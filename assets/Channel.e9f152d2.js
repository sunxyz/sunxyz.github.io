import{_ as V,a as x,u as z,m as N,g as F,f as D,b as T,r as _,o as s,c as d,d as a,w as t,V as y,e as c,h as m,i as o,j as u,k as r,l as C,n as h,t as l,p as g,q as k,s as v,v as f,x as I,F as j,y as M}from"./index.53114866.js";import{V as b}from"./VChip.458eb97b.js";const A={inject:["viewName"],props:["id"],data:()=>({channel:{id:void 0,name:void 0},data:[],params:{page:0,size:20},isLast:!0,loading:!0,lazyBannerBg:"/card-thumb.jpg"}),components:{IndexView:x},mounted(){z(window,document.documentElement,()=>{this.loadMore()}),this.initData()},methods:{...N(["follow","unFollow"]),toggleFollow(){let e=this.channel;this.isFollowed?this.unFollow(e):this.follow(e)},async initData(){this.loading=!0,this.data=[],this.params.page=0,this.channel.id=encodeURIComponent(this.id),this.channel.name="\u52A0\u8F7D\u4E2D...",this.channel.description="\u52A0\u8F7D\u4E2D...",this.params.sort=void 0,this.sortName&&(this.params.sort=this.sortName+",desc"),this.channel=await F(this.id),document.title=this.channel.name+" | WebFollow",this.data=await this.loadData()},async loadData(){this.loading=!0;let e=await D(this.id,this.params);return this.isLast=e.last,this.loading=!1,e.content},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])}},computed:{...T(["follows","sortName"]),followText(){return this.isFollowed?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"},isFollowed(){let e=encodeURIComponent(this.id);return this.follows.filter(i=>i.id==e).length>0},showBannerChannel(){return this.viewName.value!="column-view"},showArticlePadding(){return this.viewName.value=="title-only-view"},banner(){let e=this.data.filter(i=>i.thumbnail).sort((i,p)=>p.rank-i.rank);return e.length?{bg:e[0].thumbnail,title:"\u6700\u8FD1\u70ED\u6587: "+e[0].title}:{bg:this.lazyBannerBg}}},watch:{id(e){this.initData(),this.lazyBannerBg="",setTimeout(()=>{this.lazyBannerBg="/card-thumb.jpg"},500)},sortName(e){this.initData(),this.lazyBannerBg="",setTimeout(()=>{this.lazyBannerBg="/card-thumb.jpg"},500)}}},L={key:0},S={style:{"max-width":"1210px"},class:"mx-auto pb-3 pt-3"},R={class:"flex",style:{padding:"0 1rem"}},E=["href"],P=["href"],U={key:0,class:"ma-3 mx-auto",style:{"text-align":"center"}},q=f(" \u52A0\u8F7D\u66F4\u591A "),W={key:1},G={class:"flex",style:{padding:"0 1rem"}},H=["href"];function J(e,i,p,K,O,n){const B=_("router-link"),w=_("index-view");return n.showBannerChannel?(s(),d("div",L,[a(y,{class:"w-row"},{default:t(()=>[a(c,{width:"100%"},{default:t(()=>[a(m,{src:n.banner.bg,class:"text-white align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:"",height:"200px",title:n.banner.title},null,8,["src","title"]),o("div",S,[o("div",R,[a(u,{style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:t(()=>[e.channel.icon?(s(),r(C,{key:0,size:"2em",class:"pr-3"},{default:t(()=>[a(m,{class:"icon-avatar-sm",src:e.channel.icon},null,8,["src"])]),_:1})):h("",!0),o("a",{href:e.channel.link,target:"_blank"},l(e.channel.name),9,E)]),_:1}),a(g,{size:"small",color:"indigo",dark:"",textContent:l(n.followText),onClick:n.toggleFollow},null,8,["textContent","onClick"])]),a(k,{textContent:l(e.channel.description)},null,8,["textContent"]),a(v,{class:"pt-1"},{default:t(()=>[e.channel.type?(s(),r(b,{key:0,class:"mr-3 mt-3"},{default:t(()=>[a(B,{to:"/setup?chanType="+e.channel.type},{default:t(()=>[f(l(e.channel.type),1)]),_:1},8,["to"])]),_:1})):h("",!0),a(b,{class:"mt-3"},{default:t(()=>[o("a",{href:e.channel.link,target:"_blank"},l(e.channel.link),9,P)]),_:1})]),_:1})])]),_:1})]),_:1}),a(y,{class:"w-row",style:{"margin-top":"-12px"}},{default:t(()=>[a(c,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[a(u,{class:"mt-1",textContent:l(e.sortName=="rank"?"\u70ED\u70B9\u6587\u7AE0":"\u6700\u8FD1\u66F4\u65B0")},null,8,["textContent"]),a(v,{style:{"font-size":"0.9em"},class:I({"pa-0":n.showArticlePadding})},{default:t(()=>[a(w,{data:e.data,"load-more":n.loadMore,loading:e.loading,md:4,sm:6,xs:12},null,8,["data","load-more","loading"]),e.isLast?h("",!0):(s(),d("div",U,[a(g,{onClick:n.loadMore},{default:t(()=>[q]),_:1},8,["onClick"])]))]),_:1},8,["class"])]),_:1})]),_:1})])):(s(),d("div",W,[a(w,{data:e.data,"load-more":n.loadMore,loading:e.loading,md:4,sm:6,xs:12},{default:t(()=>[a(c,{flat:""},{default:t(()=>[o("div",G,[e.channel.name?(s(),r(u,{key:0,style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:t(()=>[a(C,{size:"2em",class:"pr-3"},{default:t(()=>[e.channel.icon?(s(),r(m,{key:0,class:"icon-avatar-sm",src:e.channel.icon},null,8,["src"])):(s(),d(j,{key:1},[f(l(e.channel.name.substr(0,1)),1)],64))]),_:1}),o("a",{href:e.channel.link,target:"_blank"},l(e.channel.name),9,H)]),_:1})):h("",!0),a(g,{size:"small",color:"indigo",dark:"",textContent:l(n.followText),onClick:n.toggleFollow},null,8,["textContent","onClick"])]),a(k,{textContent:l(e.channel.description),title:e.channel.description,class:"mb-3"},null,8,["textContent","title"]),a(M)]),_:1})]),_:1},8,["data","load-more","loading"])]))}const Y=V(A,[["render",J],["__scopeId","data-v-7c650c18"]]);export{Y as default};

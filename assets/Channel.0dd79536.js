import{_ as g,b as w,m as _,g as C,f as x,d as V,r as k,o as n,e as d,a as t,w as e,h,F as y,V as r,i as F,j as o,k as c,t as s,l as m,n as b,p as u,q as i,s as v}from"./index.517c42de.js";import{V as f}from"./VChip.8b03acf2.js";const D={props:["id"],inject:["isToBottom"],data:()=>({channel:{},data:[],params:{page:0,size:20},isLast:!0,loading:!0}),components:{IndexView:w},mounted(){this.initData()},methods:{..._(["follow","unFollow"]),toggleFollow(){let a=this.channel;this.isFollowed?this.unFollow(a):this.follow(a)},async initData(){this.params.page=0,this.channel=await C(this.id),this.data=await this.loadData()},async loadData(){this.loading=!0;let a=await x(this.id,this.params);return this.isLast=a.last,this.loading=!1,a.content},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])}},computed:{...V(["follows"]),followText(){return this.isFollowed?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"},isFollowed(){return this.follows.filter(a=>a.id==this.id).length>0}},watch:{id(a){this.data=[],this.loading=!0,this.initData()},"isToBottom.value"(a){a&&!this.isLast&&this.loadMore()}}},T={style:{"max-width":"1024px"},class:"mx-auto pb-3 pt-3"},B=["href"],L=["href"],M=i("\u6700\u8FD1\u66F4\u65B0 "),j={key:0,class:"ma-3 mx-auto",style:{"text-align":"center"}},N=i(" \u52A0\u8F7D\u66F4\u591A ");function z(a,I,S,q,E,l){const p=k("index-view");return n(),d(y,null,[t(h,{justify:"space-around"},{default:e(()=>[t(r,{width:"100%"},{default:e(()=>[t(F,{src:"https://images4.alphacoders.com/121/1217454.jpg",class:"text-white align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:"",height:"200px"}),o("div",T,[t(c,{class:"flex"},{default:e(()=>[o("a",{href:a.channel.link},s(a.channel.name),9,B),t(m,{size:"small",color:"indigo",dark:"",textContent:s(l.followText),onClick:l.toggleFollow},null,8,["textContent","onClick"])]),_:1}),t(b,{textContent:s(a.channel.description)},null,8,["textContent"]),t(u,{class:"pt-1"},{default:e(()=>[t(f,{class:"mr-3 mt-3"},{default:e(()=>[i(s(a.channel.type),1)]),_:1}),t(f,{class:"mt-3"},{default:e(()=>[o("a",{href:a.channel.link},s(a.channel.link),9,L)]),_:1})]),_:1})])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(r,{"max-width":"1024",class:"mx-auto auto-size"},{default:e(()=>[t(c,{class:"mb-2"},{default:e(()=>[M]),_:1}),t(u,null,{default:e(()=>[t(p,{data:a.data,"load-more":l.loadMore,loading:a.loading,md:4,sm:6,xs:12},null,8,["data","load-more","loading"]),a.isLast?v("",!0):(n(),d("div",j,[t(m,{onClick:l.loadMore},{default:e(()=>[N]),_:1},8,["onClick"])]))]),_:1})]),_:1})]),_:1})],64)}const A=g(D,[["render",z]]);export{A as default};

import{z as G,a0 as K,aT as H,ag as C,aU as J,K as O,aj as Q,ai as X,d as e,ak as L,aW as Y,b3 as Z,_ as $,b4 as ee,b as te,m as se,r as U,o as d,c,w as l,V as T,ad as le,F as w,e as N,i as n,j as ae,a8 as oe,q as u,ar as k,k as m,p as I,s as r,v as i,t as h,a3 as ie,b5 as ne,x as de,au as ue,av as re}from"./index.e7d006d4.js";import{m as ce,f as me,V as he,g as fe,c as _e,u as pe,a as ge,b as we,d as B,e as Ve}from"./VTable.9a06161f.js";import{V as ve,c as D,b as be,a as ye}from"./VWindowItem.612d063a.js";import{m as ke,f as xe,d as Se,e as Ce}from"./VTextField.d836dd72.js";const Le=G({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ke(),...ce()},emits:{"update:indeterminate":a=>!0},setup(a,o){let{attrs:x,slots:f}=o;const s=K(a,"indeterminate"),{loaderClasses:V}=H(a),v=C(()=>typeof a.loading=="string"&&a.loading!==""?a.loading:a.color),_=J(),t=C(()=>a.id||`switch-${_}`);function b(){s.value&&(s.value=!1)}return O(()=>{const[R,F]=Q(x),[P,Qe]=xe(a),[z,Xe]=me(a),S=X();function A(){var p,g;(p=S.value)==null||(g=p.input)==null||g.click()}return e(Se,L({class:["v-switch",{"v-switch--inset":a.inset},{"v-switch--indeterminate":s.value},V.value]},R,P,{id:t.value}),{...f,default:p=>{let{id:g,isDisabled:W,isReadonly:j,isValid:E}=p;return e(he,L({ref:S},z,{id:g.value,type:"checkbox","onUpdate:modelValue":b,"aria-checked":s.value?"mixed":void 0,disabled:W.value,readonly:j.value},F),{...f,default:()=>e("div",{class:"v-switch__track",onClick:A},null),input:M=>{let{textColorClasses:q}=M;return e("div",{class:["v-switch__thumb",q.value]},[a.loading&&e(Y,{name:"v-switch",active:!0,color:E.value===!1?void 0:v.value},{default:y=>f.loader?f.loader(y):e(Z,{active:y.isActive,color:y.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),Ue={data(){return{tab:"\u4F18\u5148\u7EA7",items:["\u4F18\u5148\u7EA7","\u63A8\u9001\u8BBE\u7F6E"],slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},components:{Skeleton:ee},computed:{...te(["token"])},methods:{...se(["reloadFollow"]),async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let a=await fe();a.follows.forEach(o=>o.sort_copy=o.sort),this.settings=a},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollowsSort():await this.update(),this.btnLoading=!1},async changeFollowsSort(){try{let a=this.settings.follows.filter(o=>o.sort_copy!=o.sort);a.length&&(await _e(a),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(a){console.log(a),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let a={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme,enabledNewsletterSend:this.settings.enabledNewsletterSend};await pe(a),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}}},mounted(){this.token&&this.initData()}},Te=a=>(ue("data-v-97503323"),a=a(),re(),a),Ne={class:"mt-6 mx-auto",style:{"max-width":"1210px"}},Ie=i("far fa-paper-plane"),Be=i(" Rss2Newsletter"),De=i("\u5B9A\u5236\u5C5E\u4E8E\u4F60\u7684\u4E13\u5C5E\u4FE1\u606F \u5C11\u5373\u662F\u591A; \u7F51\u4E0A\u4FE1\u606F\u6D69\u5982\u4E91\u70DF\uFF0C\u5206\u6563\u5728\u5404\u5904\uFF0C\u5982\u4F55\u89E3\u51B3\u4FE1\u606F\u8FC7\u8F7D\uFF0C\u4E00\u4E2A\u90AE\u7BB1\u5373\u53EF\u3002 "),Re={class:"flex pr-4"},Fe=i("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),Pe=i("\u6DFB\u52A0\u8BA2\u9605\u6E90"),ze=Te(()=>n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"\u540D\u79F0"),n("th",{class:"text-left"},"rss\u5730\u5740"),n("th",{class:"text-left"},"\u4F18\u5148\u7EA7")])],-1)),Ae=["href"],We=["onUpdate:modelValue"],je={key:1,class:"my-6 mx-auto text-center"},Ee=i("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),Me=i("\u63A8\u9001\u90AE\u7BB1 "),qe=i("\u63A8\u9001\u65F6\u95F4 "),Ge=i(" 7:00-12:00 "),Ke=i("\u5448\u73B0\u5F62\u5F0F "),He=i("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),Je=i("\u5F00\u542F\u63A8\u9001 ");function Oe(a,o,x,f,s,V){const v=U("router-link"),_=U("skeleton");return d(),c(w,null,[e(T,{class:"w-row"},{default:l(()=>[e(N,{width:"100%"},{default:l(()=>[n("div",Ne,[e(ae,null,{default:l(()=>[e(oe,{size:"small",class:"mr-2"},{default:l(()=>[Ie]),_:1}),Be]),_:1}),e(u,null,{default:l(()=>[De]),_:1}),e(ve,{modelValue:s.tab,"onUpdate:modelValue":o[0]||(o[0]=t=>s.tab=t),class:"mt-3",grow:""},{default:l(()=>[(d(!0),c(w,null,k(s.items,t=>(d(),m(ye,{key:t,value:t},{default:l(()=>[i(h(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(T,{class:"w-row mt-8"},{default:l(()=>[e(N,{"max-width":"1210",class:"mx-auto auto-size"},{default:l(()=>[s.loading?(d(),m(r,{key:1,style:{"min-height":"60vh"}},{default:l(()=>[e(_,{class:"mt-3",width:"20%",height:"1em"}),(d(),c(w,null,k(6,t=>e(_,{class:"mt-6",width:"100%",height:"1.2em",key:t})),64))]),_:1})):(d(),m(be,{key:0,modelValue:s.tab,"onUpdate:modelValue":o[5]||(o[5]=t=>s.tab=t),style:{"min-height":"60vh"}},{default:l(()=>[e(D,{value:"\u4F18\u5148\u7EA7"},{default:l(()=>[n("div",Re,[e(u,{class:"mt-6"},{default:l(()=>[Fe]),_:1}),e(I,{color:"indigo",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:l(()=>[Pe]),_:1})]),e(r,null,{default:l(()=>[s.settings.follows.length?(d(),m(ge,{key:0,"fixed-header":"",height:"50vh"},{default:l(()=>[ze,n("tbody",null,[(d(!0),c(w,null,k(s.settings.follows,t=>(d(),c("tr",{key:t.name},[n("td",null,h(t.channelName),1),n("td",null,[n("a",{target:"_blank",href:t.rssUrl,title:"\u67E5\u770Brss"},h(t.rssUrl),9,Ae)]),n("td",null,[ie(n("input",{type:"text","onUpdate:modelValue":b=>t.sort=b,class:de(["item-sort",{"item-change":t.sort!=t.sort_copy}])},null,10,We),[[ne,t.sort]])])]))),128))])]),_:1})):(d(),c("div",je,[e(v,{to:"/setup"},{default:l(()=>[Ee]),_:1})]))]),_:1})]),_:1}),e(D,{value:"\u63A8\u9001\u8BBE\u7F6E"},{default:l(()=>[e(u,{class:"mt-6"},{default:l(()=>[Me]),_:1}),e(r,{class:"px-6"},{default:l(()=>[i(h(s.settings.email),1)]),_:1}),e(u,null,{default:l(()=>[qe]),_:1}),e(r,{class:"px-6"},{default:l(()=>[Ge]),_:1}),e(u,null,{default:l(()=>[Ke]),_:1}),e(r,null,{default:l(()=>[e(we,{modelValue:s.settings.itemsTheme,"onUpdate:modelValue":o[1]||(o[1]=t=>s.settings.itemsTheme=t)},{default:l(()=>[e(B,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),e(B,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[He]),_:1}),e(r,null,{default:l(()=>[e(Ve,{modelValue:s.settings.itemsLimit,"onUpdate:modelValue":o[3]||(o[3]=t=>s.settings.itemsLimit=t),class:"align-center",max:s.slider.max,min:s.slider.min,step:1,"hide-details":""},{append:l(()=>[e(Ce,{modelValue:s.settings.itemsLimit,"onUpdate:modelValue":o[2]||(o[2]=t=>s.settings.itemsLimit=t),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),e(u,null,{default:l(()=>[Je]),_:1}),e(r,{class:"px-6"},{default:l(()=>[e(Le,{modelValue:s.settings.enabledNewsletterSend,"onUpdate:modelValue":o[4]||(o[4]=t=>s.settings.enabledNewsletterSend=t),"hide-details":"",inset:"",label:`${s.settings.enabledNewsletterSend?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])),s.loading?(d(),m(_,{key:3,class:"ma-3",width:"64px",height:"36px"})):(d(),m(I,{key:2,loading:s.btnLoading,class:"ma-3",color:"indigo",onClick:V.save,disabled:a.token?s.tab=="\u4F18\u5148\u7EA7"&&s.settings.follows.filter(t=>t.sort_copy!=t.sort).length==0:!0},{default:l(()=>[i(h(a.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))]),_:1})]),_:1}),e(le,{location:"top",timeout:5e3,modelValue:s.tip.show,"onUpdate:modelValue":o[6]||(o[6]=t=>s.tip.show=t)},{default:l(()=>[i(h(s.tip.msg),1)]),_:1},8,["modelValue"])],64)}const tt=$(Ue,[["render",Oe],["__scopeId","data-v-97503323"]]);export{tt as default};

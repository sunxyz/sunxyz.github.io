import{_ as l,u as h,i,al as c,am as m,r as u,o as s,c as p,d as g,e as o,w as n,V as _,g as r,F as f,h as w,j as v,t as y}from"./index.c2573c65.js";import{_ as N,u as B}from"./IndexView.3325a708.js";import"./Reader.60e7670d.js";import"./VSnackbar.0b58f70a.js";const{setChannel:C}=h(),D={props:["id"],data:()=>({data:[],params:{page:0,size:20},isLast:!0,loading:!0,lazyBannerBg:"/card-thumb.jpg"}),setup(){const a=i("currentViewName"),t=i("sortName");return{viewName:a,sortName:t}},components:{IndexView:N},mounted(){console.log("-----------------",this.id),B(window,document.documentElement,()=>{this.loadMore()}),this.initData()},methods:{async initData(){this.loading=!0,this.data=[],this.params.page=0,this.params.sort=void 0,this.sortName&&(this.params.sort=this.sortName+",desc"),C(await c(this.getId())),this.data=await this.loadData()},async loadData(){this.loading=!0;const a=this.$route.fullPath;let t=await m(this.getId(),this.params);return a==this.$route.fullPath?(this.loading=!1,this.isLast=t.last,t.content):(this.loading=!1,[])},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])},getId(){return Array.isArray(this.id)?this.id.join("/"):this.id}},computed:{hideLoadMoreBtn(){return this.viewName=="column-view"}},watch:{id(a){this.initData()},sortName(a){this.initData()}}};function V(a,t,k,L,M,e){const d=u("index-view");return s(),p(f,null,[g(d,{data:a.data,"load-more":e.loadMore,loading:a.loading,"is-last":a.isLast,xl:3,lg:3,md:4,sm:6,cols:12},null,8,["data","load-more","loading","is-last"]),e.hideLoadMoreBtn?r("",!0):(s(),o(_,{key:0,class:"ma-3"},{default:n(()=>[a.isLast?r("",!0):(s(),o(w,{key:0,class:"mx-auto",onClick:e.loadMore},{default:n(()=>[v(y(a.$vuetify.locale.t("loadMoreBtn")),1)]),_:1},8,["onClick"]))]),_:1}))],64)}const A=l(D,[["render",V],["__scopeId","data-v-cee688d4"]]);export{A as default};

import{an as me,ao as he,ap as pe,b as $,a9 as ce,v as w,aq as Q,x as O,af as be,ar as ve,as as ye,d as l,O as D,F as g,at as ge,ag as Ve,au as X,av as we,_ as ke,u as Ce,aw as Te,ax as Se,ay as Be,az as Fe,a1 as Le,r as H,o as k,c as P,w as t,V as N,D as K,C as Re,J as C,j as i,t as d,K as b,I as B,L as y,aA as U,h as F,N as Y,aB as Ie,g as ze,e as Z}from"./index.58c4f061.js";import{R as _e}from"./Reader.6c645e2d.js";import{V as Oe}from"./VSnackbar.8f92af62.js";import{V as Pe,a as L,b as Ue,c as R}from"./VWindowItem.fd979ec6.js";import{m as Me,f as qe,V as Ae,a as De,b as M}from"./VTextField.54b80f15.js";import{V as x,a as He}from"./VChip.212dbdea.js";const Ne=me({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...he({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>pe(e).every(a=>a!=null&&typeof a=="object")},...Me({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:u,emit:n,slots:h}=a;const{t:r}=$(),f=ce(e,"modelValue"),I=w(()=>typeof e.showSize!="boolean"?e.showSize:void 0),z=w(()=>{var o;return((o=f.value)!=null?o:[]).reduce((m,p)=>{let{size:T=0}=p;return m+T},0)}),s=w(()=>Q(z.value,I.value)),q=w(()=>{var o;return((o=f.value)!=null?o:[]).map(m=>{const{name:p="",size:T=0}=m;return e.showSize?`${p} (${Q(T,I.value)})`:p})}),ee=w(()=>{var p;var o;const m=(p=(o=f.value)==null?void 0:o.length)!=null?p:0;return e.showSize?r(e.counterSizeString,m,s.value):r(e.counterString,m)}),E=O(),j=O(),V=O(!1),c=O(),le=w(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function A(){if(c.value!==document.activeElement){var o;(o=c.value)==null||o.focus()}V.value||(V.value=!0)}function ae(o){X(e["onClick:prepend"],o),W(o)}function W(o){var m;(m=c.value)==null||m.click(),n("click:control",o)}function te(o){o.stopPropagation(),A(),we(()=>{f.value=[],c!=null&&c.value&&(c.value.value=""),X(e["onClick:clear"],o)})}return be(()=>{const o=!!(h.counter||e.counter),m=!!(o||h.details),[p,T]=ve(u),[{modelValue:sl,...se}]=ye(e),[ie]=qe(e);return l(ge,D({ref:E,modelValue:f.value,"onUpdate:modelValue":S=>f.value=S,class:"v-file-input","onClick:prepend":ae,"onClick:append":e["onClick:append"]},p,se,{focused:V.value,messages:le.value}),{...h,default:S=>{let{isDisabled:_,isDirty:G,isReadonly:ne,isValid:oe}=S;return l(Ae,D({ref:j,"prepend-icon":e.prependIcon,"onClick:control":W,"onClick:clear":te,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ie,{active:G.value||V.value,dirty:G.value,focused:V.value,error:oe.value===!1}),{...h,default:ue=>{let{props:{class:de,...re}}=ue;return l(g,null,[l("input",D({ref:c,type:"file",readonly:ne.value,disabled:_.value,multiple:e.multiple,name:e.name,onClick:v=>{v.stopPropagation(),A()},onChange:v=>{var J;if(!v.target)return;const fe=v.target;f.value=[...(J=fe.files)!=null?J:[]]},onFocus:A,onBlur:()=>V.value=!1},re,T),null),l("div",{class:de},[f.value.length>0&&(h.selection?h.selection({fileNames:q.value,totalBytes:z.value,totalBytesReadable:s.value}):e.chips?q.value.map(v=>l(x,{key:v,size:"small",color:e.color},{default:()=>[v]})):q.value.join(", "))])])}})},details:m?S=>{var _;return l(g,null,[(_=h.details)==null?void 0:_.call(h,S),o&&l(g,null,[l("span",null,null),l(De,{active:!!f.value.length,value:ee.value},h.counter)])])}:void 0})}),Ve({},E,j,c)}}),{setBar:Ke}=Ce(),{reloadFollow:Ee}=Te(),je={data:()=>({tab:null,data:[],chanTypeCheck:"",showTip:!1,tipMsg:void 0,search:void 0,submitLoading:!1,channels:[],files:void 0,dialog:!1,item:{}}),setup(){const{t:e}=$();function a(u){return e("setup."+u)}return{st:a}},components:{Reader:_e},async mounted(){Ke(this.st("appbar"),"mdi:mdi-shape-circle-plus"),await this.initData(),this.$route.query.chanType?this.chanTypeCheck=this.$route.query.chanType:this.$route.query.q&&(this.search=this.$route.query.q,this.searchRss(this.search))},methods:{go(e){this.$router.push(e)},async initData(){let e=await Se(),a={};for(let u of e){let n=a[u.type];n||(n=[],a[u.type]=n),n.push(u)}this.data=[];for(let u in a)this.data.push({type:u,items:a[u]})},async searchRss(e){if(e=e||this.search,this.search){this.submitLoading=!0;try{this.$router.replace("/setup?q="+e),console.log(e);let a=await Be({search:e});this.chanTypeCheck=void 0,setTimeout(()=>{this.channels=a.map(u=>({id:u}))},300)}catch(a){this.showTip=!0,this.tipMsg=a.response.data.message}this.submitLoading=!1}else this.showTip=!0,this.tipMsg=this.st("rssSearchErr")},async importOpml(){if(this.files&&this.files.length){try{this.submitLoading=!0,await Fe(this.files[0]),Ee(),this.showTip=!0,this.tipMsg=this.st("importOpmlSuccess")}catch{this.showTip=!0,this.tipMsg=this.st("importOpmlErr")}this.submitLoading=!1}else this.showTip=!0,this.tipMsg=this.st("importOpmlFail")},async openRead(e){this.item=await Le(e),this.item.id=e}},watch:{chanTypeCheck(e){let a=this.data.filter(u=>u.type==e);e&&this.$router.replace("/setup?chanType="+e),this.channels=a.length?a[0].items:[]}}},We={class:"mt-8 mx-auto",style:{"max-width":"1210px"}},Ge=i(" fas fa-rss"),Je=i("far fa-file-lines"),Qe=i("fab fa-bilibili"),Xe=i("fab fa-weibo"),Ye=i("fab fa-zhihu"),Ze=i("\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237"),$e=i("\u5C0F\u52A9\u624B\uFF1A\u70B9\u51FB\u7528\u6237\u5934\u50CF\u4F1A\u8BBF\u95EEhttp://space.bilibili.com/xxx?xvsfds \u5176\u4E2D\u7684xxx\u5C31\u662F\u7528\u6237id"),xe=i("\u5173\u6CE8\u5FAE\u535A"),el=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u5173\u952E\u8BCDid\u662F\u5173\u6CE8\u5173\u952E\u8BCD"),ll=i("\u5173\u6CE8\u77E5\u4E4E"),al=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u8BDD\u9898id\u662F\u5173\u6CE8\u8BDD\u9898");function tl(e,a,u,n,h,r){const f=H("b-channel-light"),I=H("reader"),z=H("c-dialog");return k(),P(g,null,[l(N,{class:"w-row"},{default:t(()=>[l(K,{width:"100%"},{default:t(()=>[Re("div",We,[l(C,null,{default:t(()=>[i(d(n.st("title")),1)]),_:1}),l(b,null,{default:t(()=>[i(d(n.st("subTitle")),1)]),_:1}),l(Pe,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.tab=s),class:"mt-3"},{default:t(()=>[l(L,{value:"rssFollow"},{default:t(()=>[l(B,{title:n.st("rssTitle")},{default:t(()=>[Ge]),_:1},8,["title"])]),_:1}),l(L,{value:"fileFollow"},{default:t(()=>[l(B,{title:n.st("opmlTitle")},{default:t(()=>[Je]),_:1},8,["title"])]),_:1}),l(L,{value:"biLiBiLiFollow"},{default:t(()=>[l(B,{title:"\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u52A8\u6001"},{default:t(()=>[Qe]),_:1})]),_:1}),l(L,{value:"weiBoFollow"},{default:t(()=>[l(B,{title:"\u5173\u6CE8\u5FAE\u535A\u52A8\u6001"},{default:t(()=>[Xe]),_:1})]),_:1}),l(L,{value:"zhiHuFollow"},{default:t(()=>[l(B,{title:"\u5173\u6CE8\u77E5\u4E4E\u52A8\u6001"},{default:t(()=>[Ye]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(N,{class:"w-row mt-6"},{default:t(()=>[l(K,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[l(Ue,{modelValue:e.tab,"onUpdate:modelValue":a[14]||(a[14]=s=>e.tab=s)},{default:t(()=>[l(R,{value:"rssFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[i(d(n.st("rssTitle")),1)]),_:1}),l(b,{innerHTML:n.st("rssSubHtml")},null,8,["innerHTML"]),l(y,null,{default:t(()=>[l(M,{flat:"","hide-details":"",label:n.st("rssInputLabel"),"prepend-inner-icon":"fa-solid fa-rss","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=s=>e.search=s),onKeyup:a[2]||(a[2]=U(s=>r.searchRss(e.search),["enter"]))},null,8,["label","modelValue"]),l(F,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[3]||(a[3]=s=>r.searchRss(e.search))},{default:t(()=>[i(d(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(R,{value:"biLiBiLiFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[Ze]),_:1}),l(b,null,{default:t(()=>[$e]),_:1}),l(y,null,{default:t(()=>[l(M,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u7528\u6237id","prepend-inner-icon":"fa-brands fa-bilibili","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[4]||(a[4]=s=>e.search=s),onKeyup:a[5]||(a[5]=U(s=>r.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search),["enter"]))},null,8,["modelValue"]),l(F,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[6]||(a[6]=s=>r.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search))},{default:t(()=>[i(d(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(R,{value:"weiBoFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[xe]),_:1}),l(b,null,{default:t(()=>[el]),_:1}),l(y,null,{default:t(()=>[l(M,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u5173\u952E\u8BCD","prepend-inner-icon":"fa-brands fa-weibo","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[7]||(a[7]=s=>e.search=s),onKeyup:a[8]||(a[8]=U(s=>r.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(F,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[9]||(a[9]=s=>r.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)))},{default:t(()=>[i(d(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(R,{value:"zhiHuFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[ll]),_:1}),l(b,null,{default:t(()=>[al]),_:1}),l(y,null,{default:t(()=>[l(M,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u8BDD\u9898","prepend-inner-icon":"fa-brands fa-zhihu","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[10]||(a[10]=s=>e.search=s),onKeyup:a[11]||(a[11]=U(s=>r.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(F,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:a[12]||(a[12]=s=>r.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)))},{default:t(()=>[i(d(n.st("searchBtn")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(R,{value:"fileFollow"},{default:t(()=>[l(C,{class:"my-3"},{default:t(()=>[i(d(n.st("opmlTitle")),1)]),_:1}),l(b,null,{default:t(()=>[i(d(n.st("opmlSubHtml")),1)]),_:1}),l(y,null,{default:t(()=>[l(Ne,{"prepend-icon":"far fa-file-lines",modelValue:e.files,"onUpdate:modelValue":a[13]||(a[13]=s=>e.files=s),label:n.st("opmlTitle"),style:{height:"56px"}},null,8,["modelValue","label"]),l(F,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"primary",rounded:"pill",onClick:r.importOpml},{default:t(()=>[i(d(n.st("importBtn")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(N,{class:"mt-6"},{default:t(()=>[l(K,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[l(b,{class:"mt-4"},{default:t(()=>[i(d(n.st("recommend")),1)]),_:1}),l(y,null,{default:t(()=>[l(He,{modelValue:e.chanTypeCheck,"onUpdate:modelValue":a[15]||(a[15]=s=>e.chanTypeCheck=s),column:""},{default:t(()=>[(k(!0),P(g,null,Y(e.data,s=>(k(),Z(x,{key:s.type,value:s.type,filter:"",outlined:""},{default:t(()=>[i(d(s.type),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.channels.length?(k(),P(g,{key:0},[l(Ie),l(b,{class:"mt-4 mb-3"},{default:t(()=>[i(d(n.st("searchResult")),1)]),_:1}),l(y,null,{default:t(()=>[(k(!0),P(g,null,Y(e.channels,s=>(k(),Z(f,{key:s.id,id:s.id,onClick:r.openRead},null,8,["id","onClick"]))),128))]),_:1})],64)):ze("",!0)]),_:1})]),_:1}),l(Oe,{location:"top",timeout:5e3,modelValue:e.showTip,"onUpdate:modelValue":a[16]||(a[16]=s=>e.showTip=s)},{default:t(()=>[i(d(e.tipMsg),1)]),_:1},8,["modelValue"]),l(z,{"model-value":e.item.id!=null},{default:t(()=>[l(I,{modelValue:e.item,"onUpdate:modelValue":a[17]||(a[17]=s=>e.item=s),"ctrl-style":"position:fixed","hidde-up-and-down":!0},null,8,["modelValue"])]),_:1},8,["model-value"])],64)}const fl=ke(je,[["render",tl],["__scopeId","data-v-e25db16e"]]);export{fl as default};

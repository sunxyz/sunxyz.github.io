import{z as he,L as pe,ae as ce,af as me,a0 as be,ag as V,ah as W,ai as P,K as ve,aj as ge,d as l,ak as K,F as k,al as ye,am as Ve,_ as we,m as _e,an as ke,ao as Ce,ap as Se,aa as Te,b as Fe,r as X,o as w,c as M,w as t,e as j,ad as Le,i as h,j as y,q as m,a8 as F,y as O,a3 as L,a9 as I,s as v,aq as U,p as _,ar as Y,n as Ie,v as i,t as R,as as Re,at as ze,k as Z,au as $e,av as Be}from"./index.f457be90.js";import{V as Pe,a as z}from"./VTabs.40306301.js";import{m as Me,a as Oe,f as Ue,b as De,V as Ae,c as Ne,d as Ke,e as D}from"./VTextField.75d89ed8.js";import{V as x,a as je}from"./VChip.8e45a984.js";const qe=he({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Me(),prependIcon:{type:pe,default:"$file"},modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(a=>a!=null&&typeof a=="object")},...Oe({clearable:!0})},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:p,emit:d,slots:n}=a;const{t:u}=me(),r=be(e,"modelValue"),$=V(()=>typeof e.showSize!="boolean"?e.showSize:void 0),s=V(()=>{var o;return((o=r.value)!=null?o:[]).reduce((f,c)=>{let{size:S=0}=c;return f+S},0)}),q=V(()=>W(s.value,$.value)),A=V(()=>{var o;return((o=r.value)!=null?o:[]).map(f=>{const{name:c="",size:S=0}=f;return e.showSize?`${c} (${W(S,$.value)})`:c})}),le=V(()=>{var o,f;const c=(o=(f=r.value)==null?void 0:f.length)!=null?o:0;return e.showSize?u(e.counterSizeString,c,q.value):u(e.counterString,c)}),H=P(),E=P(),C=P(!1),b=P(),ae=V(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function N(){if(b.value!==document.activeElement){var o;(o=b.value)==null||o.focus()}C.value||(C.value=!0)}function G(o){var f;(f=b.value)==null||f.click(),d("click:control",o)}function te(o){o.stopPropagation(),N(),Ve(()=>{r.value=[],b!=null&&b.value&&(b.value.value=""),d("click:clear",o)})}return ve(()=>{const o=!!(n.counter||e.counter),f=!!(o||n.details),[c,S]=ge(p),[{modelValue:kl,...se}]=Ue(e),[ie]=De(e);return l(Ke,K({ref:H,modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,class:"v-file-input"},c,se,{"onClick:prepend":G,messages:ae.value}),{...n,default:T=>{let{isDisabled:B,isDirty:J,isReadonly:oe,isValid:ne}=T;return l(Ae,K({ref:E,"prepend-icon":e.prependIcon,"onClick:control":G,"onClick:clear":te},ie,{active:J.value||C.value,dirty:J.value,focused:C.value,error:ne.value===!1}),{...n,default:de=>{let{props:{class:ue,...re}}=de;return l(k,null,[l("input",K({ref:b,type:"file",readonly:oe.value,disabled:B.value,multiple:e.multiple,name:e.name,onClick:g=>{g.stopPropagation(),N()},onChange:g=>{var Q;if(!g.target)return;const fe=g.target;r.value=[...(Q=fe.files)!=null?Q:[]]},onFocus:N,onBlur:()=>C.value=!1},re,S),null),r.value.length>0&&l("div",{class:ue},[n.selection?n.selection({fileNames:A.value,totalBytes:s.value,totalBytesReadable:q.value}):e.chips?A.value.map(g=>l(x,{key:g,size:"small",color:e.color},{default:()=>[g]})):A.value.join(", ")])])}})},details:f?T=>{var B;return l(k,null,[(B=n.details)==null?void 0:B.call(n,T),o&&l(k,null,[l("span",null,null),l(Ne,{active:!!r.value.length,value:le.value},n.counter)])])}:void 0})}),ye({},H,E,b)}}),He={data:()=>({tab:null,data:[],chanTypeCheck:"",showTip:!1,tipMsg:void 0,search:void 0,submitLoading:!1,channels:[],files:void 0,dialog:!1}),async mounted(){await this.initData(),this.$route.query.chanType&&(this.chanTypeCheck=this.$route.query.chanType)},methods:{..._e(["follow","reloadFollow"]),go(e){this.$router.push(e)},async initData(){let e=new Set;this.follows.forEach(d=>e.add(d.id));let a=(await ke()).filter(d=>!e.has(d.id)),p={};for(let d of a){let n=p[d.type];n||(n=[],p[d.type]=n),n.push(d)}this.data=[];for(let d in p)this.data.push({type:d,items:p[d]})},async searchRss(e){if(e=e||this.search,this.search){this.submitLoading=!0;try{console.log(e);let a=await Ce({search:e});this.chanTypeCheck=void 0,setTimeout(()=>{this.channels=a.map(p=>({id:p}))},300)}catch(a){this.showTip=!0,this.tipMsg=a.response.data.message}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605"},async importOpml(){if(this.files&&this.files.length){try{this.submitLoading=!0,await Se(this.files[0]),this.reloadFollow(),this.showTip=!0,this.tipMsg="\u5BFC\u5165\u6210\u529F"}catch{this.showTip=!0,this.tipMsg="\u5BFC\u5165\u5931\u8D25\u8BF7\u68C0\u67E5\u6587\u4EF6"}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u9009\u62E9opml\u6587\u4EF6"},async openRead(e){this.item=await Te(e),this.item.id=e,this.dialog=!0}},computed:{...Fe(["follows"])},watch:{chanTypeCheck(){let e=this.data.filter(a=>a.type==this.chanTypeCheck);this.channels=e.length?e[0].items:[]}}},ee=e=>($e("data-v-cf66d985"),e=e(),Be(),e),Ee={class:"mt-3 mb-6"},Ge=i("\u627E\u5230\u6700\u4F73\u4FE1\u606F\u6E90"),Je=i("\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u67E5\u627E\u7F51\u7AD9\u6458\u8981\u3001B\u7AD9\u7528\u6237\u3001\u5FAE\u535A\u7528\u6237\u3001\u77E5\u4E4E\u7528\u6237\uFF0C\u5BFC\u5165\u8BA2\u9605\u6E90"),Qe=i("fa-solid fa-rss"),We=i("fa-brands fa-bilibili"),Xe=i("fa-brands fa-weibo"),Ye=i("fa-brands fa-zhihu"),Ze=i("far fa-file-lines"),xe=i("rss\u8BA2\u9605"),el=i("\u53D1\u73B0\u66F4\u591A\u8BA2\u9605\u6E90 "),ll=ee(()=>h("a",{href:"https://docs.rsshub.app/",class:"mx-2"},"rsshub",-1)),al=ee(()=>h("a",{href:"https://rss-source.com/"},"rss-source",-1)),tl=i(" \u641C\u7D22 "),sl=i("\u8BD5\u8BD5\u8BA2\u9605\u4E0D\u540C\u7C7B\u578B\u7684\u5185\u5BB9\u5427"),il=i("\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237"),ol=i("\u5C0F\u52A9\u624B\uFF1A\u70B9\u51FB\u7528\u6237\u5934\u50CF\u4F1A\u8BBF\u95EEhttp://space.bilibili.com/xxx?xvsfds \u5176\u4E2D\u7684xxx\u5C31\u662F\u7528\u6237id"),nl=i(" \u641C\u7D22 "),dl=i("\u5173\u6CE8\u5FAE\u535A"),ul=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u5173\u952E\u8BCDid\u662F\u5173\u6CE8\u5173\u952E\u8BCD"),rl=i(" \u641C\u7D22 "),fl=i("\u5173\u6CE8\u77E5\u4E4E"),hl=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u8BDD\u9898id\u662F\u5173\u6CE8\u8BDD\u9898"),pl=i(" \u641C\u7D22 "),cl=i("\u5BFC\u5165 OPML \u6587\u4EF6"),ml=i("\u5C0F\u52A9\u624B\uFF1A\u5BFC\u5165\u5DF2\u6709 OPML \u6587\u4EF6"),bl=i(" \u5BFC\u5165 "),vl={key:0},gl=i("\u641C\u7D22\u7ED3\u679C"),yl=["innerHTML"],Vl=["href"],wl=i(" \u5173\u95ED ");function _l(e,a,p,d,n,u){const r=X("b-channel-light"),$=X("c-dialog");return w(),M(k,null,[l(j,{"max-width":"1210",class:"mx-auto",flat:""},{default:t(()=>[h("div",Ee,[l(y,null,{default:t(()=>[Ge]),_:1}),l(m,null,{default:t(()=>[Je]),_:1})]),l(Pe,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.tab=s)},{default:t(()=>[l(z,{value:"rssFollow"},{default:t(()=>[l(F,{title:"rss\u5730\u5740\u8BA2\u9605"},{default:t(()=>[Qe]),_:1})]),_:1}),l(z,{value:"bilibiliFollow"},{default:t(()=>[l(F,{title:"\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u52A8\u6001"},{default:t(()=>[We]),_:1})]),_:1}),l(z,{value:"weiboFollow"},{default:t(()=>[l(F,{title:"\u5173\u6CE8\u5FAE\u535A\u52A8\u6001"},{default:t(()=>[Xe]),_:1})]),_:1}),l(z,{value:"zhihuFollow"},{default:t(()=>[l(F,{title:"\u5173\u6CE8\u77E5\u4E4E\u52A8\u6001"},{default:t(()=>[Ye]),_:1})]),_:1}),l(z,{value:"fileFollow"},{default:t(()=>[l(F,{title:"\u5BFC\u5165OPML\u8BA2\u9605\u6E90"},{default:t(()=>[Ze]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O),l(j,{flat:""},{default:t(()=>[L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[xe]),_:1}),l(m,null,{default:t(()=>[el,ll,al]),_:1}),l(v,null,{default:t(()=>[l(D,{flat:"","hide-details":"",label:"\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605","prepend-inner-icon":"fa-solid fa-rss","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=s=>e.search=s),onKeyup:a[2]||(a[2]=U(s=>u.searchRss(e.search),["enter"]))},null,8,["modelValue"]),l(_,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[3]||(a[3]=s=>u.searchRss(e.search))},{default:t(()=>[tl]),_:1},8,["loading","disabled"])]),_:1}),l(O,{class:"mb-4"}),l(m,null,{default:t(()=>[sl]),_:1}),l(v,null,{default:t(()=>[l(je,{modelValue:e.chanTypeCheck,"onUpdate:modelValue":a[4]||(a[4]=s=>e.chanTypeCheck=s),column:""},{default:t(()=>[(w(!0),M(k,null,Y(e.data,s=>(w(),Z(x,{key:s.type,value:s.type,filter:"",outlined:""},{default:t(()=>[i(R(s.type),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})],512),[[I,e.tab=="rssFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[il]),_:1}),l(m,null,{default:t(()=>[ol]),_:1}),l(v,null,{default:t(()=>[l(D,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u7528\u6237id","prepend-inner-icon":"fa-brands fa-bilibili","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[5]||(a[5]=s=>e.search=s),onKeyup:a[6]||(a[6]=U(s=>u.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search),["enter"]))},null,8,["modelValue"]),l(_,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[7]||(a[7]=s=>u.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search))},{default:t(()=>[nl]),_:1},8,["loading","disabled"])]),_:1})],512),[[I,e.tab=="bilibiliFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[dl]),_:1}),l(m,null,{default:t(()=>[ul]),_:1}),l(v,null,{default:t(()=>[l(D,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u5173\u952E\u8BCD","prepend-inner-icon":"fa-brands fa-weibo","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[8]||(a[8]=s=>e.search=s),onKeyup:a[9]||(a[9]=U(s=>u.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(_,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[10]||(a[10]=s=>u.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)))},{default:t(()=>[rl]),_:1},8,["loading","disabled"])]),_:1})],512),[[I,e.tab=="weiboFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[fl]),_:1}),l(m,null,{default:t(()=>[hl]),_:1}),l(v,null,{default:t(()=>[l(D,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u8BDD\u9898","prepend-inner-icon":"fa-brands fa-zhihu","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[11]||(a[11]=s=>e.search=s),onKeyup:a[12]||(a[12]=U(s=>u.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(_,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[13]||(a[13]=s=>u.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)))},{default:t(()=>[pl]),_:1},8,["loading","disabled"])]),_:1})],512),[[I,e.tab=="zhihuFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[cl]),_:1}),l(m,null,{default:t(()=>[ml]),_:1}),l(v,null,{default:t(()=>[l(qe,{"prepend-icon":"far fa-file-lines",modelValue:e.files,"onUpdate:modelValue":a[14]||(a[14]=s=>e.files=s),label:"OPML \u6587\u4EF6",style:{height:"56px"}},null,8,["modelValue"]),l(_,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:u.importOpml},{default:t(()=>[bl]),_:1},8,["loading","disabled","onClick"])]),_:1})],512),[[I,e.tab=="fileFollow"]]),e.channels.length?(w(),M("div",vl,[l(O,{class:"mb-4"}),l(m,{class:"mb-2"},{default:t(()=>[gl]),_:1}),l(v,null,{default:t(()=>[(w(!0),M(k,null,Y(e.channels,s=>(w(),Z(r,{key:s.id,id:s.id,onClick:u.openRead},null,8,["id","onClick"]))),128))]),_:1})])):Ie("",!0)]),_:1})]),_:1}),l(Le,{location:"top",timeout:5e3,modelValue:e.showTip,"onUpdate:modelValue":a[15]||(a[15]=s=>e.showTip=s)},{default:t(()=>[i(R(e.tipMsg),1)]),_:1},8,["modelValue"]),l($,{modelValue:e.dialog,"onUpdate:modelValue":a[17]||(a[17]=s=>e.dialog=s)},{default:t(()=>[l(j,{class:"read-main"},{default:t(()=>[l(v,null,{default:t(()=>[l(y,{class:"text-h5 px-0",title:e.item.title},{default:t(()=>[i(R(e.item.title),1)]),_:1},8,["title"]),l(m,{class:"px-0 mb-3"},{default:t(()=>[i(R(e.item.channelName)+" "+R(e.item.pubDateTime),1)]),_:1}),h("div",{class:"read-warp mx-auto",innerHTML:e.item.description},null,8,yl)]),_:1}),l(O),l(Re,null,{default:t(()=>[h("a",{href:e.item.link,target:"_blank",class:"pl-3"},"\u67E5\u770B\u539F\u6587",8,Vl),l(ze),l(_,{text:"",onClick:a[16]||(a[16]=s=>e.dialog=!1)},{default:t(()=>[wl]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Ll=we(He,[["render",_l],["__scopeId","data-v-cf66d985"]]);export{Ll as default};

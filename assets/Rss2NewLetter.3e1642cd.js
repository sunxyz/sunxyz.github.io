import{_ as T,u as N,s as U,a as C,aR as D,S as R,r as w,o as d,c as m,d as e,w as t,V,F as _,C as b,B as n,I as B,H as F,J as r,L as f,e as h,h as y,K as u,j as i,t as c,bt as I,bu as x,bv as z,T as E,bx as W,D as j,bC as A,bD as G}from"./index.0c4a6453.js";import{g as H,c as J,u as K,V as M,a as q}from"./VTable.c5a93be2.js";import{V as O}from"./VSnackbar.f56eed8e.js";import{V as P,c as k,b as Q,a as X}from"./VWindowItem.217068fc.js";import{b as Y}from"./VTextField.7768c314.js";const{setBar:Z}=N(),$={data(){return{tab:"\u4F18\u5148\u7EA7",items:["\u4F18\u5148\u7EA7","\u63A8\u9001\u8BBE\u7F6E"],slider:{min:0,max:20},tip:{show:!1,msg:void 0},loading:!1,btnLoading:!1,settings:{itemsLimit:0,itemsTheme:0,email:"",follows:[]}}},setup(){const{token:o}=U(C()),{reloadFollow:a}=D();return{token:o,reloadFollow:a}},components:{Skeleton:R},methods:{async initData(){this.loading=!0,await this.loadData(),this.loading=!1},async loadData(){let o=await H();o.follows.forEach(a=>a.sort_copy=a.sort),this.settings=o},async save(){this.btnLoading=!0,this.tab=="\u4F18\u5148\u7EA7"?await this.changeFollowsSort():await this.update(),this.btnLoading=!1},async changeFollowsSort(){try{let o=this.settings.follows.filter(a=>a.sort_copy!=a.sort);o.length&&(await J(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData(),this.reloadFollow())}catch(o){console.log(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}},async update(){try{let o={itemsLimit:this.settings.itemsLimit,itemsTheme:this.settings.itemsTheme,enabledNewsletterSend:this.settings.enabledNewsletterSend};await K(o),this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u6210\u529F",this.loadData()}catch{this.tip.show=!0,this.tip.msg="\u64CD\u4F5C\u5931\u8D25"}}},mounted(){Z("Rss2Newsletter","mdi:mdi-send"),this.token&&this.initData()}},ee=o=>(A("data-v-05eca0c6"),o=o(),G(),o),te={class:"mt-6 mx-auto",style:{"max-width":"1210px"}},se=i("far fa-paper-plane"),le=i(" Rss2Newsletter"),ae=i("\u5B9A\u5236\u5C5E\u4E8E\u4F60\u7684\u4E13\u5C5E\u4FE1\u606F \u5C11\u5373\u662F\u591A; \u7F51\u4E0A\u4FE1\u606F\u6D69\u5982\u4E91\u70DF\uFF0C\u5206\u6563\u5728\u5404\u5904\uFF0C\u5982\u4F55\u89E3\u51B3\u4FE1\u606F\u8FC7\u8F7D\uFF0C\u4E00\u4E2A\u90AE\u7BB1\u5373\u53EF\u3002 "),oe={class:"flex pr-4"},ie=i("\u7BA1\u7406\u8BA2\u9605\u6E90\u4F18\u5148\u7EA7(\u70B9\u51FB\u4F18\u5148\u7EA7\u7F16\u8F91\u5373\u53EF\uFF0C\u8D8A\u5C0F\u8D8A\u9760\u524D\u54E6) "),ne=i("\u6DFB\u52A0\u8BA2\u9605\u6E90"),de=ee(()=>n("thead",null,[n("tr",null,[n("th",{class:"text-left"},"\u540D\u79F0"),n("th",{class:"text-left"},"rss\u5730\u5740"),n("th",{class:"text-left"},"\u4F18\u5148\u7EA7")])],-1)),re=["href"],ue=["onUpdate:modelValue"],me={key:1,class:"my-6 mx-auto text-center"},he=i("\u7A7A\u7A7A\u5982\u4E5F\uFF0C\u5FEB\u53BB\u8BA2\u9605\u5427"),ce=i("\u63A8\u9001\u90AE\u7BB1 "),_e=i("\u63A8\u9001\u65F6\u95F4 "),pe=i(" 7:00-12:00 "),fe=i("\u5448\u73B0\u5F62\u5F0F "),ge=i("\u63A8\u9001\u6570\u91CF\u4E0A\u9650 "),we=i("\u5F00\u542F\u63A8\u9001 ");function Ve(o,a,be,g,l,v){const S=w("router-link"),p=w("skeleton");return d(),m(_,null,[e(V,{class:"w-row"},{default:t(()=>[e(b,{width:"100%"},{default:t(()=>[n("div",te,[e(B,null,{default:t(()=>[e(F,{size:"small",class:"mr-2"},{default:t(()=>[se]),_:1}),le]),_:1}),e(r,null,{default:t(()=>[ae]),_:1}),e(P,{modelValue:l.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>l.tab=s),class:"mt-3",grow:""},{default:t(()=>[(d(!0),m(_,null,f(l.items,s=>(d(),h(X,{key:s,value:s},{default:t(()=>[i(c(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(V,{class:"w-row mt-8"},{default:t(()=>[e(b,{"max-width":"1210",class:"mx-auto auto-size"},{default:t(()=>[l.loading?(d(),h(u,{key:1,style:{"min-height":"60vh"}},{default:t(()=>[e(p,{class:"mt-3",width:"20%",height:"1em"}),(d(),m(_,null,f(6,s=>e(p,{class:"mt-6",width:"100%",height:"1.2em",key:s})),64))]),_:1})):(d(),h(Q,{key:0,modelValue:l.tab,"onUpdate:modelValue":a[5]||(a[5]=s=>l.tab=s),style:{"min-height":"60vh"}},{default:t(()=>[e(k,{value:"\u4F18\u5148\u7EA7"},{default:t(()=>[n("div",oe,[e(r,{class:"mt-6"},{default:t(()=>[ie]),_:1}),e(y,{color:"primary",to:"/setup",variant:"outlined",title:"\u6DFB\u52A0\u66F4\u591A",size:"small","prepend-icon":"fas fa-plus"},{default:t(()=>[ne]),_:1})]),e(u,null,{default:t(()=>[l.settings.follows.length?(d(),h(M,{key:0,"fixed-header":"",height:"50vh"},{default:t(()=>[de,n("tbody",null,[(d(!0),m(_,null,f(l.settings.follows,s=>(d(),m("tr",{key:s.name},[n("td",null,c(s.channelName),1),n("td",null,[n("a",{target:"_blank",href:s.rssUrl,title:"\u67E5\u770Brss"},c(s.rssUrl),9,re)]),n("td",null,[E(n("input",{type:"text","onUpdate:modelValue":L=>s.sort=L,class:j(["item-sort",{"item-change":s.sort!=s.sort_copy}])},null,10,ue),[[W,s.sort]])])]))),128))])]),_:1})):(d(),m("div",me,[e(S,{to:"/setup"},{default:t(()=>[he]),_:1})]))]),_:1})]),_:1}),e(k,{value:"\u63A8\u9001\u8BBE\u7F6E"},{default:t(()=>[e(r,{class:"mt-6"},{default:t(()=>[ce]),_:1}),e(u,{class:"px-6"},{default:t(()=>[i(c(l.settings.email),1)]),_:1}),e(r,null,{default:t(()=>[_e]),_:1}),e(u,{class:"px-6"},{default:t(()=>[pe]),_:1}),e(r,null,{default:t(()=>[fe]),_:1}),e(u,null,{default:t(()=>[e(I,{modelValue:l.settings.itemsTheme,"onUpdate:modelValue":a[1]||(a[1]=s=>l.settings.itemsTheme=s)},{default:t(()=>[e(x,{label:"\u6458\u8981\u6A21\u5F0F",value:0}),e(x,{label:"\u8BE6\u60C5\u6A21\u5F0F",value:1})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[ge]),_:1}),e(u,null,{default:t(()=>[e(z,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":a[3]||(a[3]=s=>l.settings.itemsLimit=s),class:"align-center",max:l.slider.max,min:l.slider.min,step:1,"hide-details":""},{append:t(()=>[e(Y,{modelValue:l.settings.itemsLimit,"onUpdate:modelValue":a[2]||(a[2]=s=>l.settings.itemsLimit=s),"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1}),e(r,null,{default:t(()=>[we]),_:1}),e(u,{class:"px-6"},{default:t(()=>[e(q,{modelValue:l.settings.enabledNewsletterSend,"onUpdate:modelValue":a[4]||(a[4]=s=>l.settings.enabledNewsletterSend=s),"hide-details":"",inset:"",label:`${l.settings.enabledNewsletterSend?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])),l.loading?(d(),h(p,{key:3,class:"ma-3",width:"64px",height:"36px"})):(d(),h(y,{key:2,loading:l.btnLoading,class:"ma-3",color:"primary",onClick:v.save,disabled:g.token?l.tab=="\u4F18\u5148\u7EA7"&&l.settings.follows.filter(s=>s.sort_copy!=s.sort).length==0:!0},{default:t(()=>[i(c(g.token?"\u4FDD\u5B58":"\u8BF7\u5148\u767B\u5F55\u54E6"),1)]),_:1},8,["loading","onClick","disabled"]))]),_:1})]),_:1}),e(O,{location:"top",timeout:5e3,modelValue:l.tip.show,"onUpdate:modelValue":a[6]||(a[6]=s=>l.tip.show=s)},{default:t(()=>[i(c(l.tip.msg),1)]),_:1},8,["modelValue"])],64)}const Le=T($,[["render",Ve],["__scopeId","data-v-05eca0c6"]]);export{Le as default};

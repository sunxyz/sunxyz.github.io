import{_ as b,ax as x,ay as v,az as V,aA as B,aB as z,aC as D,aD as g,o,c as d,d as e,w as a,aE as p,i as r,aF as F,v as i,f as h,t as l,n as c,l as _,k as w,j as T,p as m,aG as C,aH as N}from"./index.061cf41b.js";import{V as k}from"./VChip.67e7555e.js";const j={inject:["viewName"],props:["id"],data:()=>({channel:{id:void 0,name:void 0},data:[],params:{page:0,size:20},isLast:!0,loading:!0,lazyBannerBg:"/card-thumb.jpg"}),components:{IndexView:x},mounted(){v(window,document.documentElement,()=>{this.loadMore()}),this.initData()},methods:{...V(["follow","unFollow"]),toggleFollow(){let t=this.channel;this.isFollowed?this.unFollow(t):this.follow(t)},async initData(){this.params.page=0,this.channel.id=encodeURIComponent(this.id),this.channel.name="\u52A0\u8F7D\u4E2D...",this.channel.description="\u52A0\u8F7D\u4E2D...",this.data=[],this.channel=await B(this.id),this.data=await this.loadData()},async loadData(){this.loading=!0;let t=await z(this.id,this.params);return this.isLast=t.last,this.loading=!1,t.content},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])}},computed:{...D(["follows"]),followText(){return this.isFollowed?"\u5DF2\u8BA2\u9605":"\u8BA2\u9605"},isFollowed(){let t=encodeURIComponent(this.id);return this.follows.filter(s=>(console.log(s.id,t),s.id==t)).length>0},showChannel(){return this.viewName.value!="column-view"},banner(){let t=this.data.filter(s=>s.thumbnail).sort((s,u)=>u.rank-s.rank);return t.length?{bg:t[0].thumbnail,title:"\u6700\u8FD1\u70ED\u6587: "+t[0].title}:{bg:this.lazyBannerBg}}},watch:{id(t){this.initData(),this.lazyBannerBg="",setTimeout(()=>{this.lazyBannerBg="/card-thumb.jpg"},500)}}},I={key:0},M={style:{"max-width":"1024px"},class:"mx-auto pb-3 pt-3"},L={class:"flex",style:{padding:"0 1rem"}},S=["href"],E=["href"],R=m("\u6700\u8FD1\u66F4\u65B0 "),A={key:0,class:"ma-3 mx-auto",style:{"text-align":"center"}},U=m(" \u52A0\u8F7D\u66F4\u591A "),G={key:1},H={class:"flex",style:{padding:"0 1rem"}},q=["href"];function J(t,s,u,K,O,n){const y=g("router-link"),f=g("index-view");return n.showChannel?(o(),d("div",I,[e(p,{justify:"space-around"},{default:a(()=>[e(r,{width:"100%"},{default:a(()=>[e(F,{src:n.banner.bg,class:"text-white align-end",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:"",height:"200px",title:n.banner.title},null,8,["src","title"]),i("div",M,[i("div",L,[e(h,{style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:a(()=>[i("a",{href:t.channel.link,target:"_blank"},l(t.channel.name),9,S)]),_:1}),e(c,{size:"small",color:"indigo",dark:"",textContent:l(n.followText),onClick:n.toggleFollow},null,8,["textContent","onClick"])]),e(_,{textContent:l(t.channel.description)},null,8,["textContent"]),e(w,{class:"pt-1"},{default:a(()=>[t.channel.type?(o(),T(k,{key:0,class:"mr-3 mt-3"},{default:a(()=>[e(y,{to:"/setup?chanType="+t.channel.type},{default:a(()=>[m(l(t.channel.type),1)]),_:1},8,["to"])]),_:1})):C("",!0),e(k,{class:"mt-3"},{default:a(()=>[i("a",{href:t.channel.link,target:"_blank"},l(t.channel.link),9,E)]),_:1})]),_:1})])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(r,{"max-width":"1024",class:"mx-auto auto-size"},{default:a(()=>[e(h,{class:"mb-2"},{default:a(()=>[R]),_:1}),e(w,null,{default:a(()=>[e(f,{data:t.data,"load-more":n.loadMore,loading:t.loading,md:4,sm:6,xs:12},null,8,["data","load-more","loading"]),t.isLast?C("",!0):(o(),d("div",A,[e(c,{onClick:n.loadMore},{default:a(()=>[U]),_:1},8,["onClick"])]))]),_:1})]),_:1})]),_:1})])):(o(),d("div",G,[e(f,{data:t.data,"load-more":n.loadMore,loading:t.loading,md:4,sm:6,xs:12},{default:a(()=>[e(r,{flat:""},{default:a(()=>[i("div",H,[e(h,{style:{"padding-left":"0",width:"calc(100% - 70px)"}},{default:a(()=>[i("a",{href:t.channel.link,target:"_blank"},l(t.channel.name),9,q)]),_:1}),e(c,{size:"small",color:"indigo",dark:"",textContent:l(n.followText),onClick:n.toggleFollow},null,8,["textContent","onClick"])]),e(_,{textContent:l(t.channel.description),title:t.channel.description,class:"mb-3"},null,8,["textContent","title"]),e(N)]),_:1})]),_:1},8,["data","load-more","loading"])]))}const W=b(j,[["render",J]]);export{W as default};

import{_ as l,u as c,i as o,af as m,ag as h,r as u,o as e,c as p,a as _,b as i,w as n,V as g,d,F as f,e as w,g as v}from"./index.af5c1540.js";import{_ as N,u as C}from"./IndexView.cf715d0b.js";import"./Reader.299d0ff9.js";import"./VSnackbar.e166657f.js";const{setChannel:x}=c(),B={props:["id"],data:()=>({data:[],params:{page:0,size:20},isLast:!0,loading:!0,lazyBannerBg:"/card-thumb.jpg"}),setup(){const a=o("currentViewName"),s=o("sortName");return{viewName:a,sortName:s}},components:{IndexView:N},mounted(){console.log("initData-----------"),C(window,document.documentElement,()=>{this.loadMore()}),this.initData()},methods:{async initData(){this.loading=!0,this.data=[],this.params.page=0,this.params.sort=void 0,this.sortName&&(this.params.sort=this.sortName+",desc"),console.log("initData----------"),x(await m(this.id)),this.data=await this.loadData()},async loadData(){this.loading=!0;let a=await h(this.id,this.params);return this.isLast=a.last,this.loading=!1,a.content},async loadMore(){this.isLast||(this.params.page+=1,this.data=[...this.data,...await this.loadData()])}},computed:{hideLoadMoreBtn(){return this.viewName.value=="column-view"}},watch:{id(a){this.initData()},sortName(a){this.initData()}}},D=v(" \u52A0\u8F7D\u66F4\u591A ");function y(a,s,V,k,L,t){const r=u("index-view");return e(),p(f,null,[_(r,{data:a.data,"load-more":t.loadMore,loading:a.loading,xl:3,lg:3,md:4,sm:6,xs:12},null,8,["data","load-more","loading"]),t.hideLoadMoreBtn?d("",!0):(e(),i(g,{key:0,class:"ma-3"},{default:n(()=>[a.isLast?d("",!0):(e(),i(w,{key:0,class:"mx-auto",onClick:t.loadMore},{default:n(()=>[D]),_:1},8,["onClick"]))]),_:1}))],64)}const z=l(B,[["render",y],["__scopeId","data-v-9c1ae5ef"]]);export{z as default};

import{z as fe,L as he,ae as ce,af as pe,a0 as me,ag as V,ah as W,ai as B,K as be,aj as ve,d as l,ak as K,F as C,al as ge,am as ye,_ as Ve,m as we,an as ke,ao as Ce,ap as _e,aa as Te,b as Fe,r as X,o as w,c as P,w as t,e as j,ad as Se,i as h,j as y,q as m,a8 as S,y as M,a3 as L,a9 as R,s as v,aq as O,p as k,ar as Y,n as Le,v as i,t as U,as as Re,at as ze,k as Z}from"./index.0d9d7e81.js";import{V as $e,a as z}from"./VTabs.989da313.js";import{m as Ie,a as Be,f as Pe,b as Me,V as Oe,c as Ue,d as Ae,e as A}from"./VTextField.42f3e472.js";import{V as x,a as De}from"./VChip.1bf5d663.js";const Ne=fe({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Ie(),prependIcon:{type:he,default:"$file"},modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(a=>a!=null&&typeof a=="object")},...Be({clearable:!0})},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:c,emit:u,slots:n}=a;const{t:d}=pe(),r=me(e,"modelValue"),$=V(()=>typeof e.showSize!="boolean"?e.showSize:void 0),s=V(()=>{var o;return((o=r.value)!=null?o:[]).reduce((f,p)=>{let{size:T=0}=p;return f+T},0)}),q=V(()=>W(s.value,$.value)),D=V(()=>{var o;return((o=r.value)!=null?o:[]).map(f=>{const{name:p="",size:T=0}=f;return e.showSize?`${p} (${W(T,$.value)})`:p})}),ee=V(()=>{var o,f;const p=(o=(f=r.value)==null?void 0:f.length)!=null?o:0;return e.showSize?d(e.counterSizeString,p,q.value):d(e.counterString,p)}),H=B(),E=B(),_=B(!1),b=B(),le=V(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function N(){if(b.value!==document.activeElement){var o;(o=b.value)==null||o.focus()}_.value||(_.value=!0)}function G(o){var f;(f=b.value)==null||f.click(),u("click:control",o)}function ae(o){o.stopPropagation(),N(),ye(()=>{r.value=[],b!=null&&b.value&&(b.value.value=""),u("click:clear",o)})}return be(()=>{const o=!!(n.counter||e.counter),f=!!(o||n.details),[p,T]=ve(c),[{modelValue:Vl,...te}]=Pe(e),[se]=Me(e);return l(Ae,K({ref:H,modelValue:r.value,"onUpdate:modelValue":F=>r.value=F,class:"v-file-input"},p,te,{"onClick:prepend":G,messages:le.value}),{...n,default:F=>{let{isDisabled:I,isDirty:J,isReadonly:ie,isValid:oe}=F;return l(Oe,K({ref:E,"prepend-icon":e.prependIcon,"onClick:control":G,"onClick:clear":ae},se,{active:J.value||_.value,dirty:J.value,focused:_.value,error:oe.value===!1}),{...n,default:ne=>{let{props:{class:ue,...de}}=ne;return l(C,null,[l("input",K({ref:b,type:"file",readonly:ie.value,disabled:I.value,multiple:e.multiple,name:e.name,onClick:g=>{g.stopPropagation(),N()},onChange:g=>{var Q;if(!g.target)return;const re=g.target;r.value=[...(Q=re.files)!=null?Q:[]]},onFocus:N,onBlur:()=>_.value=!1},de,T),null),r.value.length>0&&l("div",{class:ue},[n.selection?n.selection({fileNames:D.value,totalBytes:s.value,totalBytesReadable:q.value}):e.chips?D.value.map(g=>l(x,{key:g,size:"small",color:e.color},{default:()=>[g]})):D.value.join(", ")])])}})},details:f?F=>{var I;return l(C,null,[(I=n.details)==null?void 0:I.call(n,F),o&&l(C,null,[l("span",null,null),l(Ue,{active:!!r.value.length,value:ee.value},n.counter)])])}:void 0})}),ge({},H,E,b)}}),Ke={data:()=>({tab:null,data:[],chanTypeCheck:"",showTip:!1,tipMsg:void 0,search:void 0,submitLoading:!1,channels:[],files:void 0,dialog:!1}),async mounted(){await this.initData(),this.$route.query.chanType&&(this.chanTypeCheck=this.$route.query.chanType)},methods:{...we(["follow","reloadFollow"]),go(e){this.$router.push(e)},async initData(){let e=new Set;this.follows.forEach(u=>e.add(u.id));let a=(await ke()).filter(u=>!e.has(u.id)),c={};for(let u of a){let n=c[u.type];n||(n=[],c[u.type]=n),n.push(u)}this.data=[];for(let u in c)this.data.push({type:u,items:c[u]})},async searchRss(e){if(e=e||this.search,this.search){this.submitLoading=!0;try{console.log(e);let a=await Ce({search:e});this.chanTypeCheck=void 0,setTimeout(()=>{this.channels=a.map(c=>({id:c}))},300)}catch(a){this.showTip=!0,this.tipMsg=a.response.data.message}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605"},async importOpml(){if(this.files&&this.files.length){try{this.submitLoading=!0,await _e(this.files[0]),this.reloadFollow(),this.showTip=!0,this.tipMsg="\u5BFC\u5165\u6210\u529F"}catch{this.showTip=!0,this.tipMsg="\u5BFC\u5165\u5931\u8D25\u8BF7\u68C0\u67E5\u6587\u4EF6"}this.submitLoading=!1}else this.showTip=!0,this.tipMsg="\u8BF7\u9009\u62E9opml\u6587\u4EF6"},async openRead(e){this.item=await Te(e),this.item.id=e,this.dialog=!0}},computed:{...Fe(["follows"])},watch:{chanTypeCheck(){let e=this.data.filter(a=>a.type==this.chanTypeCheck);this.channels=e.length?e[0].items:[]}}},je={class:"mt-3 mb-6"},qe=i("\u627E\u5230\u6700\u4F73\u4FE1\u606F\u6E90"),He=i("\u60A8\u53EF\u4EE5\u5728\u8FD9\u91CC\u67E5\u627E\u7F51\u7AD9\u6458\u8981\u3001B\u7AD9\u7528\u6237\u3001\u5FAE\u535A\u7528\u6237\u3001\u77E5\u4E4E\u7528\u6237\uFF0C\u5BFC\u5165\u8BA2\u9605\u6E90"),Ee=i("fa-solid fa-rss"),Ge=i("fa-brands fa-bilibili"),Je=i("fa-brands fa-weibo"),Qe=i("fa-brands fa-zhihu"),We=i("far fa-file-lines"),Xe=i("rss\u8BA2\u9605"),Ye=i("\u53D1\u73B0\u66F4\u591A\u8BA2\u9605\u6E90 "),Ze=h("a",{href:"https://docs.rsshub.app/",class:"mx-2"},"rsshub",-1),xe=h("a",{href:"https://rss-source.com/"},"rss-source",-1),el=i(" \u641C\u7D22 "),ll=i("\u8BD5\u8BD5\u8BA2\u9605\u4E0D\u540C\u7C7B\u578B\u7684\u5185\u5BB9\u5427"),al=i("\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237"),tl=i("\u5C0F\u52A9\u624B\uFF1A\u70B9\u51FB\u7528\u6237\u5934\u50CF\u4F1A\u8BBF\u95EEhttp://space.bilibili.com/xxx?xvsfds \u5176\u4E2D\u7684xxx\u5C31\u662F\u7528\u6237id"),sl=i(" \u641C\u7D22 "),il=i("\u5173\u6CE8\u5FAE\u535A"),ol=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u5173\u952E\u8BCDid\u662F\u5173\u6CE8\u5173\u952E\u8BCD"),nl=i(" \u641C\u7D22 "),ul=i("\u5173\u6CE8\u77E5\u4E4E"),dl=i("\u5C0F\u52A9\u624B\uFF1A@\u52A0\u7528\u6237id\u662F\u5173\u6CE8\u7528\u6237#\u52A0\u8BDD\u9898id\u662F\u5173\u6CE8\u8BDD\u9898"),rl=i(" \u641C\u7D22 "),fl=i("\u5BFC\u5165 OPML \u6587\u4EF6"),hl=i("\u5C0F\u52A9\u624B\uFF1A\u5BFC\u5165\u5DF2\u6709 OPML \u6587\u4EF6"),cl=i(" \u5BFC\u5165 "),pl={key:0},ml=i("\u641C\u7D22\u7ED3\u679C"),bl=["innerHTML"],vl=["href"],gl=i(" \u5173\u95ED ");function yl(e,a,c,u,n,d){const r=X("b-channel-light"),$=X("c-dialog");return w(),P(C,null,[l(j,{"max-width":"1210",class:"mx-auto",flat:""},{default:t(()=>[h("div",je,[l(y,null,{default:t(()=>[qe]),_:1}),l(m,null,{default:t(()=>[He]),_:1})]),l($e,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.tab=s)},{default:t(()=>[l(z,{value:"rssFollow"},{default:t(()=>[l(S,{title:"rss\u5730\u5740\u8BA2\u9605"},{default:t(()=>[Ee]),_:1})]),_:1}),l(z,{value:"bilibiliFollow"},{default:t(()=>[l(S,{title:"\u5173\u6CE8\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u52A8\u6001"},{default:t(()=>[Ge]),_:1})]),_:1}),l(z,{value:"weiboFollow"},{default:t(()=>[l(S,{title:"\u5173\u6CE8\u5FAE\u535A\u52A8\u6001"},{default:t(()=>[Je]),_:1})]),_:1}),l(z,{value:"zhihuFollow"},{default:t(()=>[l(S,{title:"\u5173\u6CE8\u77E5\u4E4E\u52A8\u6001"},{default:t(()=>[Qe]),_:1})]),_:1}),l(z,{value:"fileFollow"},{default:t(()=>[l(S,{title:"\u5BFC\u5165OPML\u8BA2\u9605\u6E90"},{default:t(()=>[We]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(M),l(j,{flat:""},{default:t(()=>[L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[Xe]),_:1}),l(m,null,{default:t(()=>[Ye,Ze,xe]),_:1}),l(v,null,{default:t(()=>[l(A,{flat:"","hide-details":"",label:"\u8BF7\u8F93\u5165rss\u5730\u5740\u8BA2\u9605","prepend-inner-icon":"fa-solid fa-rss","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=s=>e.search=s),onKeyup:a[2]||(a[2]=O(s=>d.searchRss(e.search),["enter"]))},null,8,["modelValue"]),l(k,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[3]||(a[3]=s=>d.searchRss(e.search))},{default:t(()=>[el]),_:1},8,["loading","disabled"])]),_:1}),l(M,{class:"mb-4"}),l(m,null,{default:t(()=>[ll]),_:1}),l(v,null,{default:t(()=>[l(De,{modelValue:e.chanTypeCheck,"onUpdate:modelValue":a[4]||(a[4]=s=>e.chanTypeCheck=s),column:""},{default:t(()=>[(w(!0),P(C,null,Y(e.data,s=>(w(),Z(x,{key:s.type,value:s.type,filter:"",outlined:""},{default:t(()=>[i(U(s.type),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})],512),[[R,e.tab=="rssFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[al]),_:1}),l(m,null,{default:t(()=>[tl]),_:1}),l(v,null,{default:t(()=>[l(A,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u7528\u6237id","prepend-inner-icon":"fa-brands fa-bilibili","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[5]||(a[5]=s=>e.search=s),onKeyup:a[6]||(a[6]=O(s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search),["enter"]))},null,8,["modelValue"]),l(k,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[7]||(a[7]=s=>d.searchRss("https://rsshub.app/bilibili/user/dynamic/"+e.search))},{default:t(()=>[sl]),_:1},8,["loading","disabled"])]),_:1})],512),[[R,e.tab=="bilibiliFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[il]),_:1}),l(m,null,{default:t(()=>[ol]),_:1}),l(v,null,{default:t(()=>[l(A,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u5173\u952E\u8BCD","prepend-inner-icon":"fa-brands fa-weibo","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[8]||(a[8]=s=>e.search=s),onKeyup:a[9]||(a[9]=O(s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(k,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[10]||(a[10]=s=>d.searchRss("https://rsshub.app/weibo/"+(e.search.indexOf("#")==0?"keyword/":"user/")+e.search.substr(1,e.search.length)))},{default:t(()=>[nl]),_:1},8,["loading","disabled"])]),_:1})],512),[[R,e.tab=="weiboFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[ul]),_:1}),l(m,null,{default:t(()=>[dl]),_:1}),l(v,null,{default:t(()=>[l(A,{flat:"","hide-details":"",label:"\u5173\u6CE8\u60A8\u6700\u559C\u7231\u7684@\u7528\u6237\u6216#\u8BDD\u9898","prepend-inner-icon":"fa-brands fa-zhihu","solo-inverted":"",clearable:!0,modelValue:e.search,"onUpdate:modelValue":a[11]||(a[11]=s=>e.search=s),onKeyup:a[12]||(a[12]=O(s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)),["enter"]))},null,8,["modelValue"]),l(k,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:a[13]||(a[13]=s=>d.searchRss("https://rsshub.app/zhihu/"+(e.search.indexOf("#")==0?"topic/":"people/activities/")+e.search.substr(1,e.search.length)))},{default:t(()=>[rl]),_:1},8,["loading","disabled"])]),_:1})],512),[[R,e.tab=="zhihuFollow"]]),L(h("div",null,[l(y,{class:"my-3"},{default:t(()=>[fl]),_:1}),l(m,null,{default:t(()=>[hl]),_:1}),l(v,null,{default:t(()=>[l(Ne,{"prepend-icon":"far fa-file-lines",modelValue:e.files,"onUpdate:modelValue":a[14]||(a[14]=s=>e.files=s),label:"OPML \u6587\u4EF6",style:{height:"56px"}},null,8,["modelValue"]),l(k,{class:"mt-4",block:"",loading:e.submitLoading,disabled:e.submitLoading,color:"indigo",rounded:"pill",onClick:d.importOpml},{default:t(()=>[cl]),_:1},8,["loading","disabled","onClick"])]),_:1})],512),[[R,e.tab=="fileFollow"]]),e.channels.length?(w(),P("div",pl,[l(M,{class:"mb-4"}),l(m,{class:"mb-2"},{default:t(()=>[ml]),_:1}),l(v,null,{default:t(()=>[(w(!0),P(C,null,Y(e.channels,s=>(w(),Z(r,{key:s.id,id:s.id,onClick:d.openRead},null,8,["id","onClick"]))),128))]),_:1})])):Le("",!0)]),_:1})]),_:1}),l(Se,{location:"top",timeout:5e3,modelValue:e.showTip,"onUpdate:modelValue":a[15]||(a[15]=s=>e.showTip=s)},{default:t(()=>[i(U(e.tipMsg),1)]),_:1},8,["modelValue"]),l($,{modelValue:e.dialog,"onUpdate:modelValue":a[17]||(a[17]=s=>e.dialog=s)},{default:t(()=>[l(j,{class:"read-main"},{default:t(()=>[l(v,null,{default:t(()=>[l(y,{class:"text-h5 px-0",title:e.item.title},{default:t(()=>[i(U(e.item.title),1)]),_:1},8,["title"]),l(m,{class:"px-0 mb-3"},{default:t(()=>[i(U(e.item.channelName),1)]),_:1}),h("div",{class:"read-warp mx-auto",innerHTML:e.item.description},null,8,bl)]),_:1}),l(M),l(Re,null,{default:t(()=>[h("a",{href:e.item.link,target:"_blank",class:"pl-3"},"\u67E5\u770B\u539F\u6587",8,vl),l(ze),l(k,{text:"",onClick:a[16]||(a[16]=s=>e.dialog=!1)},{default:t(()=>[gl]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Tl=Ve(Ke,[["render",yl]]);export{Tl as default};
